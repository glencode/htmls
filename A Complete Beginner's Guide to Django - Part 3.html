<!DOCTYPE html>
<!-- saved from url=(0104)https://simpleisbetterthancomplex.com/series/2017/09/18/a-complete-beginners-guide-to-django-part-3.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="ir-site-verification-token" value="-233745807">
<title>A Complete Beginner's Guide to Django - Part 3</title>
<meta name="description" content="In this tutorial we are going to dive deep into two fundamental concepts, URLs and Forms. In the process we are going to explore many other concepts like cre...">
<link href="./A Complete Beginner&#39;s Guide to Django - Part 3_files/css" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="./A Complete Beginner&#39;s Guide to Django - Part 3_files/main.css">
<link rel="stylesheet" href="./A Complete Beginner&#39;s Guide to Django - Part 3_files/font-awesome.min.css">
<link rel="canonical" href="https://simpleisbetterthancomplex.com/series/2017/09/18/a-complete-beginners-guide-to-django-part-3.html">
<link rel="alternate" type="application/rss+xml" title="Simple is Better Than Complex" href="https://simpleisbetterthancomplex.com/feed.xml">
<link rel="icon" type="image/png" href="https://simpleisbetterthancomplex.com/favicon.png">
<link rel="mask-icon" href="https://simpleisbetterthancomplex.com/safari-pinned-tab.svg" color="#5bbad5">
<script async="" src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/fbevents.js"></script><script async="" src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/analytics.js"></script><script src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/jquery.min.js"></script>
<script src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/site.js"></script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-42049022-10', 'auto');
    ga('send', 'pageview');
  </script>
  <script>
    $(function () {
      $("#ad").on("click", "#carbonads .carbon-wrap a", function () {
        var page_id = '/series/2017/09/18/a-complete-beginners-guide-to-django-part-3.html';
        ga('send', 'event', 'carbonads', 'click', page_id, {
          'transport': 'beacon'
        });
      });
    });
  </script>
  <script>
  !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
  n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
  document,'script','https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '1689711451348257');
  fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none" alt="PageView"
  src="https://www.facebook.com/tr?id=1689711451348257&ev=PageView&noscript=1"
  /></noscript>
  <script data-ad-client="ca-pub-5430683801108011" async="" src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/f.txt"></script>


  <meta property="og:title" content="A Complete Beginner&#39;s Guide to Django - Part 3">
<meta property="og:url" content="https://simpleisbetterthancomplex.com/series/2017/09/18/a-complete-beginners-guide-to-django-part-3.html">
<meta property="og:image" content="https://simpleisbetterthancomplex.com/media/series/beginners-guide/1.11/part-3/thumbnail.jpg">
<meta property="og:description" content="In this tutorial we are going to dive deep into two fundamental concepts, URLs and Forms. In the process we are going to explore many other concepts like cre...">
<meta property="og:site_name" content="Simple is Better Than Complex">
<meta property="og:locale" content="en_US">

  <meta property="article:published_time" content="2017-09-18T08:00:00+03:00">
  <meta property="article:author" content="https://facebook.com/vitorfs">

<meta property="fb:admins" content="100000024295617">
<meta property="fb:app_id" content="1645747765697865">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="vitorfs">
<meta name="twitter:creator" content="vitorfs">
<meta name="twitter:title" content="A Complete Beginner&#39;s Guide to Django - Part 3">
<meta name="twitter:description" content="In this tutorial we are going to dive deep into two fundamental concepts, URLs and Forms. In the process we are going to explore many other concepts like creating reusable templates and installing ...">
<meta name="twitter:image" content="https://simpleisbetterthancomplex.com/media/series/beginners-guide/1.11/part-3/thumbnail.jpg">
<meta name="p:domain_verify" content="e262845cb18e4c68b0cff535a0eaea5d">
  <meta property="og:type" content="article">
  
    <meta property="article:tag" content="python">
  
    <meta property="article:tag" content="django">
  
    <meta property="article:tag" content="guide">
  
    <meta property="article:tag" content="beginners">
  
    <meta property="article:tag" content="urls">
  
    <meta property="article:tag" content="forms">
  
    <meta property="article:tag" content="templates">
  
<script id="_carbonads_projs" type="text/javascript" src="https://srv.carbonads.net/ads/CKYIEKQM.json?segment=placement:simpleisbetterthancomplexcom&amp;callback=_carbonads_go"></script><script src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/embed.js" data-timestamp="1625248278365"></script><style type="text/css">@media (min-width: 1200px) {#seriesSideBar.affix div.card { max-height: 679px!important; }}</style></head>
<body class="platform-linux" data-new-gr-c-s-check-loaded="14.1018.0" data-gr-ext-installed="">
  <div id="top" style="visibility: hidden"></div>
<header class="nav-down">
  <div class="container">
    <ul class="menu menu-right">
      <li class="menu-item">
        <a href="https://simpleisbetterthancomplex.com/search/">
          <span class="fa fa-search"></span>
        </a>
      </li>
      <li class="toggle-menu">
        <a href="javascript:void(0);">
          <span class="fa fa-bars"></span>
        </a>
      </li>
    </ul>
    <ul class="menu menu-left">
      <li class="logo">
        <a href="https://simpleisbetterthancomplex.com/" style="font-weight: 900">simple<span class="brand">is</span>better<span class="brand">than</span>complex</a>
      </li>
      <li class="menu-item">
        <a href="https://simpleisbetterthancomplex.com/">
          <span class="fa fa-home" style="margin-right: 3px"></span>
          Home
        </a>
      </li>
      <!--li class="menu-item">
        <a href="/ask/">
          <span class="fa fa-bullhorn" style="margin-right: 3px"></span>
          Ask a Question
        </a>
      </li-->
      <li class="menu-item">
        <a href="https://simpleisbetterthancomplex.com/archive/">
          <span class="fa fa-archive" style="margin-right: 3px"></span>
          Articles
        </a>
      </li>
      <li class="menu-item">
        <a href="https://simpleisbetterthancomplex.com/videos/">
          <span class="fa fa-video-camera" style="margin-right: 3px"></span>
          Videos
        </a>
      </li>
      <li class="menu-item">
        <a href="https://community.simpleisbetterthancomplex.com/">
          <span class="fa fa-comments" style="margin-right: 3px"></span>
          Community
        </a>
      </li>
      <!--li class="menu-item">
        <a href="/contact/">
          <span class="fa fa-envelope" style="margin-right: 3px"></span>
          Contact
        </a>
      </li-->
      <li class="menu-item">
        <a href="https://simpleisbetterthancomplex.com/series/">
          <span class="fa fa-book" style="margin-right: 3px"></span>
          Series
        </a>
      </li>
      <li class="menu-item">
        <a href="https://simpleisbetterthancomplex.com/snippets/">
          <span class="fa fa-code" style="margin-right: 3px"></span>
          Snippets
        </a>
      </li>
      <li class="menu-item">
        <a href="https://simpleisbetterthancomplex.com/sponsor/">
          <span class="fa fa-bullhorn" style="margin-right: 3px"></span>
          Sponsor
        </a>
      </li>
      <li class="menu-item">
        <a href="https://simpleisbetterthancomplex.com/feed.xml" target="_blank">
          <span class="fa fa-rss" style="margin-right: 3px"></span>
          RSS
        </a>
      </li>
      <li class="menu-item">
        <a href="https://colossus.simpleisbetterthancomplex.com/subscribe/d2320a41-0378-4aa8-8f4e-5bb1ffcd521d/" class="brand" target="_blank">
          <span class="fa fa-send" style="margin-right: 3px"></span> Subscribe
        </a>
      </li>
      <li class="menu-item hidden-mobile">
        <a href="https://simpleisbetterthancomplex.com/search/">
          <span class="fa fa-search"></span> Search
        </a>
      </li>
    </ul>
  </div>
</header>

  <div class="container">
    <div class="row">
      <div class="twelve columns post">
        <div class="card post-author">
  <div class="author-picture">
    <img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/picture.jpg" alt="Vitor Freitas">
  </div>
  <div class="author-info">
    <p class="name">By <strong>Vitor Freitas</strong></p>
    <p class="bio">
      I'm a passionate software developer and researcher. I write about Python, Django and Web Development on a weekly basis. <a href="https://simpleisbetterthancomplex.com/about/" rel="author">Read more</a>.
    </p>
    <p class="contact">
      <a href="https://www.youtube.com/VitorFreitas" rel="me noopener" target="_blank" title="YouTube"><i class="fa fa-youtube-play"></i></a>
      <a href="https://github.com/vitorfs" rel="me noopener" target="_blank" title="GitHub"><i class="fa fa-github"></i></a>
      <a href="https://twitter.com/vitorfs" rel="me noopener" target="_blank" title="Twitter"><i class="fa fa-twitter"></i></a>
      <a href="https://facebook.com/vitorfs" rel="me noopener" target="_blank" title="Facebook"><i class="fa fa-facebook-official"></i></a>
      <a href="https://linkedin.com/in/vitorfs" rel="me noopener" target="_blank" title="LinkedIn"><i class="fa fa-linkedin-square"></i></a>
      <a href="https://instagram.com/vitorfs" rel="me noopener" target="_blank" title="Instagram"><i class="fa fa-instagram"></i></a>
      <a href="https://simpleisbetterthancomplex.com/contact/" title="Contact"><i class="fa fa-envelope"></i></a>
    </p>
  </div>
  
  
</div>

      </div>
    </div>
    <div id="main-content" class="row">
      <div id="seriesSideBar" class="three columns affix" style="">
        <div class="card">
          
            <div id="ad">
              <script async="" type="text/javascript" src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/carbon.js" id="_carbonads_js"></script>
            </div>
          
          <nav id="platformSideBar" class="platform js-set-platform" style="margin-bottom: 2rem; font-size: 1.2rem; display: block;">
            <a href="javascript:void(0);" data-platform="mac" title="Set platform to Mac"><i class="fa fa-apple"></i> Mac</a>
            <a href="javascript:void(0);" data-platform="windows" title="Set platform to Windows"><i class="fa fa-windows"></i> Win</a>
            <a href="javascript:void(0);" data-platform="linux" title="Set platform to Linux" class="active"><i class="fa fa-linux"></i> Linux</a>
          </nav>
          <h5>Table of Contents</h5>
          <ul>
            
              <li><a href="https://simpleisbetterthancomplex.com/series/2017/09/18/a-complete-beginners-guide-to-django-part-3.html#introduction" class="">Introduction</a></li>
              
            
              <li><a href="https://simpleisbetterthancomplex.com/series/2017/09/18/a-complete-beginners-guide-to-django-part-3.html#urls" class="">URLs</a></li>
              
                <li style="padding-left: 1.5rem; font-size: 1.4rem; margin-bottom: 0.25rem">
                  <a href="https://simpleisbetterthancomplex.com/series/2017/09/18/a-complete-beginners-guide-to-django-part-3.html#basic-urls" class="">
                    Basic URLs
                  </a>
                </li>
              
                <li style="padding-left: 1.5rem; font-size: 1.4rem; margin-bottom: 0.25rem">
                  <a href="https://simpleisbetterthancomplex.com/series/2017/09/18/a-complete-beginners-guide-to-django-part-3.html#advanced-urls" class="">
                    Advanced URLs
                  </a>
                </li>
              
                <li style="padding-left: 1.5rem; font-size: 1.4rem; margin-bottom: 0.25rem">
                  <a href="https://simpleisbetterthancomplex.com/series/2017/09/18/a-complete-beginners-guide-to-django-part-3.html#using-the-urls-api" class="">
                    Using the URLs API
                  </a>
                </li>
              
                <li style="padding-left: 1.5rem; font-size: 1.4rem; margin-bottom: 0.25rem">
                  <a href="https://simpleisbetterthancomplex.com/series/2017/09/18/a-complete-beginners-guide-to-django-part-3.html#list-of-useful-url-patterns" class="">
                    List of Useful URL Patterns
                  </a>
                </li>
              
            
              <li><a href="https://simpleisbetterthancomplex.com/series/2017/09/18/a-complete-beginners-guide-to-django-part-3.html#reusable-templates" class="">Reusable Templates</a></li>
              
            
              <li><a href="https://simpleisbetterthancomplex.com/series/2017/09/18/a-complete-beginners-guide-to-django-part-3.html#forms" class="">Forms</a></li>
              
                <li style="padding-left: 1.5rem; font-size: 1.4rem; margin-bottom: 0.25rem">
                  <a href="https://simpleisbetterthancomplex.com/series/2017/09/18/a-complete-beginners-guide-to-django-part-3.html#how-not-implement-a-form" class="">
                    How Not Implement a Form
                  </a>
                </li>
              
                <li style="padding-left: 1.5rem; font-size: 1.4rem; margin-bottom: 0.25rem">
                  <a href="https://simpleisbetterthancomplex.com/series/2017/09/18/a-complete-beginners-guide-to-django-part-3.html#testing-the-form-view" class="">
                    Testing The Form View
                  </a>
                </li>
              
                <li style="padding-left: 1.5rem; font-size: 1.4rem; margin-bottom: 0.25rem">
                  <a href="https://simpleisbetterthancomplex.com/series/2017/09/18/a-complete-beginners-guide-to-django-part-3.html#creating-forms-the-right-way" class="active">
                    Creating Forms The Right Way
                  </a>
                </li>
              
                <li style="padding-left: 1.5rem; font-size: 1.4rem; margin-bottom: 0.25rem">
                  <a href="https://simpleisbetterthancomplex.com/series/2017/09/18/a-complete-beginners-guide-to-django-part-3.html#rendering-bootstrap-forms" class="">
                    Rendering Bootstrap Forms
                  </a>
                </li>
              
                <li style="padding-left: 1.5rem; font-size: 1.4rem; margin-bottom: 0.25rem">
                  <a href="https://simpleisbetterthancomplex.com/series/2017/09/18/a-complete-beginners-guide-to-django-part-3.html#reusable-forms-templates" class="">
                    Reusable Forms Templates
                  </a>
                </li>
              
                <li style="padding-left: 1.5rem; font-size: 1.4rem; margin-bottom: 0.25rem">
                  <a href="https://simpleisbetterthancomplex.com/series/2017/09/18/a-complete-beginners-guide-to-django-part-3.html#adding-more-tests" class="">
                    Adding More Tests
                  </a>
                </li>
              
            
              <li><a href="https://simpleisbetterthancomplex.com/series/2017/09/18/a-complete-beginners-guide-to-django-part-3.html#conclusions" class="">Conclusions</a></li>
              
            
          </ul>
          <hr style="margin: 1.5rem 0;">
          <ul style="font-size: 1.4rem">
            <li><a href="https://simpleisbetterthancomplex.com/series/2017/09/18/a-complete-beginners-guide-to-django-part-3.html#top"><i class="fa fa-arrow-up" style="margin-right: .2rem"></i> scroll to top</a></li>
            <li><a href="https://simpleisbetterthancomplex.com/series/2017/09/18/a-complete-beginners-guide-to-django-part-3.html#comments"><i class="fa fa-comments" style="margin-right: .2rem"></i> go to comments</a></li>
            <li><a href="https://simpleisbetterthancomplex.com/series/beginners-guide/1.11/"><i class="fa fa-list" style="margin-right: .2rem"></i> go to series index</a></li>
          </ul>
        </div>
      </div>
      <div class="nine columns content post" style="float:right">
        <div class="card">
          
  <h5 class="post-category">
    
      series
    
  </h5>
  <hr class="dashed">

<h3 class="post-title">A Complete Beginner's Guide to Django - Part 3</h3>
<ul class="post-meta">
  <li>
    <i class="fa fa-calendar"></i> Sep 18, 2017
  </li>
  <li>
    <i class="fa fa-clock-o"></i>
    71 minutes read
  </li>
  <li>
    <i class="fa fa-comments"></i>
    <a href="https://simpleisbetterthancomplex.com/series/2017/09/18/a-complete-beginners-guide-to-django-part-3.html#disqus_thread" data-disqus-identifier="/series/2017/09/18/a-complete-beginners-guide-to-django-part-3">comments</a>
  </li>
  <li>
    <i class="fa fa-eye"></i>
    <span class="ga-page-views" data-ga-identifier="/series/2017/09/18/a-complete-beginners-guide-to-django-part-3.html"></span> views
  </li>
  
    <li>
      <i class="fa fa-book"></i>
      <a href="https://simpleisbetterthancomplex.com/series/beginners-guide/1.11/">Part 3 of 7</a>
    </li>
  
  
</ul>

  <div class="post-featured-image">
    <img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/featured.jpg" alt="A Complete Beginner&#39;s Guide to Django - Part 3" class="featured-image">
    
  </div>


          <div class="row" style="margin-bottom: 2rem;">
            <div class="five columns">
              <nav id="platformArticle" class="platform js-set-platform">
                <a href="javascript:void(0);" data-platform="mac" title="Set platform to Mac"><i class="fa fa-apple"></i> Mac</a>
                <a href="javascript:void(0);" data-platform="windows" title="Set platform to Windows"><i class="fa fa-windows"></i> Windows</a>
                <a href="javascript:void(0);" data-platform="linux" title="Set platform to Linux" class="active"><i class="fa fa-linux"></i> Linux</a>

              </nav>
            </div>
            <div class="three columns">
              <nav class="platform">
                <a href="https://simpleisbetterthancomplex.com/series/beginners-guide/1.11/" class="series-nav">Series 3/7</a>
              </nav>
            </div>
            <div class="four columns versions">
              
                <img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/python-3.6.2-brightgreen.svg" alt="Python 3.6.2">
              
              
                <img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/django-1.11.4-brightgreen.svg" alt="Django 1.11.4">
              
            </div>
          </div>

          <hr class="dashed">
          <div style="text-align:center;">
            <div style="color:#aaa;font-size:1.2rem;margin-bottom:1rem;text-align:center;">ADVERTISEMENT</div>
            <script async="" src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/f.txt"></script>
            <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-5430683801108011" data-ad-slot="5978297717"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
          </div>
          <hr class="dashed">

          <article>
            <h4 id="introduction">Introduction</h4>

<p>In this tutorial, we are going to dive deep into two fundamental concepts: URLs and Forms. In the process, we are going
to explore many other concepts like creating reusable templates and installing third-party libraries. We are also
going to write plenty of unit tests.</p>

<p>If you are following this tutorial series since the first part, coding your project and following the tutorial step by
step, you may need to update your <strong>models.py</strong> before starting:</p>

<p><strong>boards/models.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Topic</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c"># other fields...</span>
    <span class="c"># Add `auto_now_add=True` to the `last_updated` field</span>
    <span class="n">last_updated</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Post</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c"># other fields...</span>
    <span class="c"># Add `null=True` to the `updated_by` field</span>
    <span class="n">updated_by</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s">'+'</span><span class="p">)</span></code></pre></figure>

<p>Now run the commands with the virtualenv activated:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">python manage.py makemigrations
python manage.py migrate</code></pre></figure>

<p>If you already have <code class="highlighter-rouge">null=True</code> in the <code class="highlighter-rouge">updated_by</code> field and the <code class="highlighter-rouge">auto_now_add=True</code> in the <code class="highlighter-rouge">last_updated</code> field,
you can safely ignore the instructions above.</p>

<p>If you prefer to use my source code as a starting point, you can grab it on GitHub.</p>

<p>The current state of the project can be found under the release tag <strong>v0.2-lw</strong>. The link below will take you to the
right place:</p>

<p><a href="https://github.com/sibtc/django-beginners-guide/tree/v0.2-lw" target="_blank">https://github.com/sibtc/django-beginners-guide/tree/v0.2-lw</a></p>

<p>The development will follow from here.</p>

<hr>

<h4 id="urls">URLs</h4>

<p>Proceeding with the development of our application, now we have to implement a new page to list all the topics that
belong to a given <strong>Board</strong>. Just to recap, below you can see the wireframe we drew in the previous tutorial:</p>

<div id="figure-1">
  <p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/wireframe-topics.png" alt="Wireframe Topics"></p>
  <p style="text-align: center">
    <small>Figure 1: Boards project wireframe listing all topics in the Django board.</small>
  </p>
</div>

<p>We will start by editing the <strong>urls.py</strong> inside the <strong>myproject</strong> folder:</p>

<p><strong>myproject/urls.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="kn">from</span> <span class="nn">boards</span> <span class="kn">import</span> <span class="n">views</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">home</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'home'</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^boards/(?P&lt;pk&gt;</span><span class="err">\</span><span class="s">d+)/$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">board_topics</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'board_topics'</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^admin/'</span><span class="p">,</span> <span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">),</span>
<span class="p">]</span></code></pre></figure>

<p>This time let’s take a moment and analyze the <code class="highlighter-rouge">urlpatterns</code> and <code class="highlighter-rouge">url</code>.</p>

<p>The URL dispatcher and <strong>URLconf</strong> (URL configuration) are fundamental parts of a Django application. In the beginning,
it can look confusing; I remember having a hard time when I first started developing with Django.</p>

<p>In fact, right now the Django Developers are working on a <a href="https://github.com/django/deps/blob/master/accepted/0201-simplified-routing-syntax.rst" target="_blank">proposal to make simplified routing syntax</a>.
But for now, as per the version 1.11, that’s what we have. So let’s try to understand how it works.</p>

<p>A project can have many <strong>urls.py</strong> distributed among the apps. But Django needs a <strong>url.py</strong> to use as a starting
point. This special <strong>urls.py</strong> is called <strong>root URLconf</strong>. It’s defined in the <strong>settings.py</strong> file.</p>

<p><strong>myproject/settings.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">ROOT_URLCONF</span> <span class="o">=</span> <span class="s">'myproject.urls'</span></code></pre></figure>

<p>It already comes configured, so you don’t need to change anything here.</p>

<p>When Django receives a request, it starts searching for a match in the project’s URLconf. It starts with the first
entry of the <code class="highlighter-rouge">urlpatterns</code> variable, and test the requested URL against each <code class="highlighter-rouge">url</code> entry.</p>

<p>If Django finds a match, it will pass the request to the <strong>view function</strong>, which is the second parameter of the
<code class="highlighter-rouge">url</code>. The order in the <code class="highlighter-rouge">urlpatterns</code> matters, because Django will stop searching as soon as it finds a match. Now, if
Django doesn’t find a match in the URLconf, it will raise a <strong>404</strong> exception, which is the error code for
<strong>Page Not Found</strong>.</p>

<p>This is the anatomy of the <code class="highlighter-rouge">url</code> function:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">url</span><span class="p">(</span><span class="n">regex</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="c"># ...</span></code></pre></figure>

<ul>
  <li><strong>regex</strong>: A regular expression for matching URL patterns in strings. Note that these regular expressions do not
search <strong>GET</strong> or <strong>POST</strong> parameters. In a request to <strong>http://127.0.0.1:8000/boards/?page=2</strong> only <strong>/boards/</strong> will
be processed.</li>
  <li><strong>view</strong>: A view function used to process the user request for a matched URL. It also accepts the return of the
<strong>django.conf.urls.include</strong> function, which is used to reference an external <strong>urls.py</strong> file. You can, for example,
use it to define a set of app specific URLs, and include it in the root URLconf using a prefix. We will explore more
on this concept later on.</li>
  <li><strong>kwargs</strong>: Arbitrary keyword arguments that’s passed to the target view. It is normally used to do some simple
customization on reusable views. We don’t use it very often.</li>
  <li><strong>name</strong>: A unique identifier for a given URL. This is a very important feature. Always remember to name your URLs.
With this, you can change a specific URL in the whole project by just changing the regex. So it’s important to never
hard code URLs in the views or templates, and always refer to the URLs by its name.</li>
</ul>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/Pixton_Comic_URL_Patterns.png" alt="Matching URL patterns"></p>

<h5 id="basic-urls">Basic URLs</h5>

<p>Basic URLs are very simple to create. It’s just a matter of matching strings. For example, let’s say we wanted to
create an “about” page, it could be defined like this:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">boards</span> <span class="kn">import</span> <span class="n">views</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">home</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'home'</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^about/$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">about</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'about'</span><span class="p">),</span>
<span class="p">]</span></code></pre></figure>

<p>We can also create deeper URL structures:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">boards</span> <span class="kn">import</span> <span class="n">views</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">home</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'home'</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^about/$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">about</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'about'</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^about/company/$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">about_company</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'about_company'</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^about/author/$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">about_author</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'about_author'</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^about/author/vitor/$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">about_vitor</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'about_vitor'</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^about/author/erica/$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">about_erica</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'about_erica'</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^privacy/$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">privacy_policy</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'privacy_policy'</span><span class="p">),</span>
<span class="p">]</span></code></pre></figure>

<p>Those are some examples of simple URL routing. For all the examples above, the view function will follow this
structure:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">about</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="c"># do something...</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'about.html'</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">about_company</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="c"># do something else...</span>
    <span class="c"># return some data along with the view...</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'about_company.html'</span><span class="p">,</span> <span class="p">{</span><span class="s">'company_name'</span><span class="p">:</span> <span class="s">'Simple Complex'</span><span class="p">})</span></code></pre></figure>

<h5 id="advanced-urls">Advanced URLs</h5>

<p>A more advanced usage of URL routing is achieved by taking advantage of the regex to match certain types of data and
create dynamic URLs.</p>

<p>For example, to create a profile page, like many services do like github.com/vitorfs or twitter.com/vitorfs, where
“vitorfs” is my username, we can do the following:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">boards</span> <span class="kn">import</span> <span class="n">views</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">home</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'home'</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^(?P&lt;username&gt;[</span><span class="err">\</span><span class="s">w.@+-]+)/$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">user_profile</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'user_profile'</span><span class="p">),</span>
<span class="p">]</span></code></pre></figure>

<p>This will match all valid usernames for a Django User model.</p>

<p>Now observe that the example above is a very <em>permissive</em> URL. That means it will match lots of URL patterns because
it is defined in the root of the URL, with no prefix like <strong>/profile/&lt;username&gt;/</strong>. In this case, if we wanted to
define a URL named <strong>/about/</strong>, we would have do define it <em>before</em> the username URL pattern:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">boards</span> <span class="kn">import</span> <span class="n">views</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">home</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'home'</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^about/$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">about</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'about'</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^(?P&lt;username&gt;[</span><span class="err">\</span><span class="s">w.@+-]+)/$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">user_profile</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'user_profile'</span><span class="p">),</span>
<span class="p">]</span></code></pre></figure>

<p>If the “about” page was defined <em>after</em> the username URL pattern, Django would never find it, because the word “about”
would match the username regex, and the view <code class="highlighter-rouge">user_profile</code> would be processed instead of the <code class="highlighter-rouge">about</code> view function.</p>

<p>There are some side effects to that. For example, from now on, we would have to treat “about” as a forbidden username,
because if a user picked “about” as their username, this person would never see their profile page.</p>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/Pixton_Comic_The_Order_Matters.png" alt="URL routing order matters"></p>

<div class="info">
  <p>
    <strong><i class="fa fa-info-circle"></i> Sidenote:</strong>
    If you want to design cool URLs for user profiles, the easiest solution to avoid URL collision is by adding a prefix
    like <strong>/u/vitorfs/</strong>, or like Medium does <strong>/@vitorfs/</strong>, where "@" is the prefix.
  </p>
  <p>
    If you want no prefix at all, consider using a list of forbidden names like this:
    <a href="https://github.com/shouldbee/reserved-usernames/blob/master/reserved-usernames.csv" target="_blank">github.com/shouldbee/reserved-usernames</a>.
    Or another example is an application I developed when I was learning Django; I created my list at the time:
    <a href="https://github.com/vitorfs/parsifal/blob/master/parsifal/authentication/forms.py#L6" target="_blank">github.com/vitorfs/parsifal/</a>.
  </p>
  <p>
    Those collisions are very common. Take GitHub for example; they have this URL to list all the repositories you are
    currently watching: <a href="https://github.com/watching" target="_blank">github.com/watching</a>. Someone registered a username
    on GitHub with the name "watching," so this person can't see his profile page. We can see a user with this
    username exists by trying this URL: <a href="https://github.com/watching/repositories" target="_blank">github.com/watching/repositories</a>
    which was supposed to list the user's repositories, like mine for example <a href="https://github.com/vitorfs/repositories" target="_blank">github.com/vitorfs/repositories</a>.
  </p>
</div>

<p>The whole idea of this kind of URL routing is to create dynamic pages where part of the URL will be used as an
identifier for a certain resource, that will be used to compose a page. This identifier can be an integer ID or a
string for example.</p>

<p>Initially, we will be working with the <strong>Board</strong> ID to create a dynamic page for the <strong>Topics</strong>. Let’s read again the
example I gave at the beginning of the <strong>URLs</strong> section:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">url</span><span class="p">(</span><span class="s">r'^boards/(?P&lt;pk&gt;</span><span class="err">\</span><span class="s">d+)/$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">board_topics</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'board_topics'</span><span class="p">)</span></code></pre></figure>

<p>The regex <code class="highlighter-rouge">\d+</code> will match an integer of arbitrary size. This integer will be used to retrieve the <strong>Board</strong> from the
database. Now observe that we wrote the regex as <code class="highlighter-rouge">(?P&lt;pk&gt;\d+)</code>, this is telling Django to capture the value into a
keyword argument named <strong>pk</strong>.</p>

<p>Here is how we write a view function for it:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">board_topics</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
    <span class="c"># do something...</span></code></pre></figure>

<p>Because we used the <code class="highlighter-rouge">(?P&lt;pk&gt;\d+)</code> regex, the keyword argument in the <code class="highlighter-rouge">board_topics</code> must be named <strong>pk</strong>.</p>

<p>If we wanted to use any name, we could do it like this:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">url</span><span class="p">(</span><span class="s">r'^boards/(</span><span class="err">\</span><span class="s">d+)/$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">board_topics</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'board_topics'</span><span class="p">)</span></code></pre></figure>

<p>Then the view function could be defined like this:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">board_topics</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">board_id</span><span class="p">):</span>
    <span class="c"># do something...</span></code></pre></figure>

<p>Or like this:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">board_topics</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="c"># do something...</span></code></pre></figure>

<p>The name wouldn’t matter. But it’s a good practice to use named parameters because when we start composing bigger
URLs capturing multiple IDs and variables, it will be easier to read.</p>

<div class="info">
  <p>
    <strong><i class="fa fa-info-circle"></i> Sidenote:</strong> PK or ID?
  </p>
  <p>
    <strong>PK</strong> stands for <strong>Primary Key</strong>. It's a shortcut for accessing a model's primary key.
    All Django models have this attribute.
  </p>
  <p>
    For the most cases, using the <code>pk</code> property is the same as <code>id</code>. That's because if we
    don't define a primary key for a model, Django will automatically create an <code>AutoField</code> named
    <code>id</code>, which will be its primary key.
  </p>
  <p>
    If you defined a different primary key for a model, for example, let's say the field <code>email</code> is
    your primary key. To access it you could either use <code>obj.email</code> or <code>obj.pk</code>.
  </p>
</div>

<h5 id="using-the-urls-api">Using the URLs API</h5>

<p>It’s time to write some code. Let’s implement the topic listing page (see <a href="https://simpleisbetterthancomplex.com/series/2017/09/18/a-complete-beginners-guide-to-django-part-3.html#figure-1">Figure 1</a>) I mentioned at the
beginning of the <strong>URLs</strong> section.</p>

<p>First, edit the <strong>urls.py</strong> adding our new URL route:</p>

<p><strong>myproject/urls.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="kn">from</span> <span class="nn">boards</span> <span class="kn">import</span> <span class="n">views</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">home</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'home'</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^boards/(?P&lt;pk&gt;</span><span class="err">\</span><span class="s">d+)/$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">board_topics</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'board_topics'</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^admin/'</span><span class="p">,</span> <span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">),</span>
<span class="p">]</span></code></pre></figure>

<p>Now let’s create the view function <code class="highlighter-rouge">board_topics</code>:</p>

<p><strong>boards/views.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Board</span>

<span class="k">def</span> <span class="nf">home</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="c"># code suppressed for brevity</span>

<span class="k">def</span> <span class="nf">board_topics</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
    <span class="n">board</span> <span class="o">=</span> <span class="n">Board</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'topics.html'</span><span class="p">,</span> <span class="p">{</span><span class="s">'board'</span><span class="p">:</span> <span class="n">board</span><span class="p">})</span></code></pre></figure>

<p>In the <strong>templates</strong> folder, create a new template named <strong>topics.html</strong>:</p>

<p><strong>templates/topics.html</strong></p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="nv">load</span> <span class="nv">static</span> <span class="cp">%}&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span><span class="cp">{{</span> <span class="nv">board.name</span> <span class="cp">}}</span><span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">static</span> <span class="s1">'css/bootstrap.min.css'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;ol</span> <span class="na">class=</span><span class="s">"breadcrumb my-4"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"breadcrumb-item"</span><span class="nt">&gt;</span>Boards<span class="nt">&lt;/li&gt;</span>
        <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"breadcrumb-item active"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">board.name</span> <span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;/ol&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<div class="info">
  <p>
    <strong><i class="fa fa-info-circle"></i> Note:</strong>
    For now we are simply creating new HTML templates. No worries, in the following section I will show you how to
    create reusable templates.
  </p>
</div>

<p>Now check the URL <strong>http://127.0.0.1:8000/boards/1/</strong> in a web browser. The result should be the following page:</p>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/topics-1.png" alt="Topics Page"></p>

<p>Time to write some tests! Edit the <strong>tests.py</strong> file and add the following tests in the bottom of the file:</p>

<p><strong>boards/tests.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.core.urlresolvers</span> <span class="kn">import</span> <span class="n">reverse</span>
<span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">resolve</span>
<span class="kn">from</span> <span class="nn">django.test</span> <span class="kn">import</span> <span class="n">TestCase</span>
<span class="kn">from</span> <span class="nn">.views</span> <span class="kn">import</span> <span class="n">home</span><span class="p">,</span> <span class="n">board_topics</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Board</span>

<span class="k">class</span> <span class="nc">HomeTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="c"># ...</span>

<span class="k">class</span> <span class="nc">BoardTopicsTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">Board</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Django'</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">'Django board.'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_board_topics_view_success_status_code</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s">'board_topics'</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">'pk'</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_board_topics_view_not_found_status_code</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s">'board_topics'</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">'pk'</span><span class="p">:</span> <span class="mi">99</span><span class="p">})</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">404</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_board_topics_url_resolves_board_topics_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">resolve</span><span class="p">(</span><span class="s">'/boards/1/'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">func</span><span class="p">,</span> <span class="n">board_topics</span><span class="p">)</span></code></pre></figure>

<p>A few things to note here. This time we used the <code class="highlighter-rouge">setUp</code> method. In the setup method, we created a <strong>Board</strong> instance
to use in the tests. We have to do that because the Django testing suite doesn’t run your tests against the current
database. To run the tests Django creates a new database on the fly, applies all the model migrations, runs the tests,
and when done, destroys the testing database.</p>

<p>So in the <code class="highlighter-rouge">setUp</code> method, we prepare the environment to run the tests, so to simulate a scenario.</p>

<ul>
  <li>The <code class="highlighter-rouge">test_board_topics_view_success_status_code</code> method: is testing if Django is returning a status code 200 (success)
for an existing <strong>Board</strong>.</li>
  <li>The <code class="highlighter-rouge">test_board_topics_view_not_found_status_code</code> method: is testing if Django is returning a status code 404
(page not found) for a <strong>Board</strong> that doesn’t exist in the database.</li>
  <li>The <code class="highlighter-rouge">test_board_topics_url_resolves_board_topics_view</code> method: is testing if Django is using the correct view
function to render the topics.</li>
</ul>

<p>Now it’s time to run the tests:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">python manage.py <span class="nb">test</span></code></pre></figure>

<p>And the output:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">Creating test database for alias 'default'...
System check identified no issues (0 silenced).
.E...
======================================================================
ERROR: test_board_topics_view_not_found_status_code (boards.tests.BoardTopicsTests)
----------------------------------------------------------------------
Traceback (most recent call last):
# ...
boards.models.DoesNotExist: Board matching query does not exist.

----------------------------------------------------------------------
Ran 5 tests in 0.093s

FAILED (errors=1)
Destroying test database for alias 'default'...</code></pre></figure>

<p>The test <strong>test_board_topics_view_not_found_status_code</strong> failed. We can see in the Traceback it returned an exception
“boards.models.DoesNotExist: Board matching query does not exist.”</p>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/topics-error-500.png" alt="Topics Error 500 Page"></p>

<p>In production with <code class="highlighter-rouge">DEBUG=False</code>, the visitor would see a <strong>500 Internal Server Error</strong> page. But that’s not the
behavior we want.</p>

<p>We want to show a <strong>404 Page Not Found</strong>. So let’s refactor our view:</p>

<p><strong>boards/views.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">Http404</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Board</span>

<span class="k">def</span> <span class="nf">home</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="c"># code suppressed for brevity</span>

<span class="k">def</span> <span class="nf">board_topics</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">board</span> <span class="o">=</span> <span class="n">Board</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Board</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">Http404</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'topics.html'</span><span class="p">,</span> <span class="p">{</span><span class="s">'board'</span><span class="p">:</span> <span class="n">board</span><span class="p">})</span></code></pre></figure>

<p>Let’s test again:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">python manage.py <span class="nb">test</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">Creating test database for alias 'default'...
System check identified no issues (0 silenced).
.....
----------------------------------------------------------------------
Ran 5 tests in 0.042s

OK
Destroying test database for alias 'default'...</code></pre></figure>

<p>Yay! Now it’s working as expected.</p>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/topics-error-404.png" alt="Topics Error 404 Page"></p>

<p>This is the default page Django show while with <code class="highlighter-rouge">DEBUG=False</code>. Later on, we can customize the 404 page to show something
else.</p>

<p>Now that’s a very common use case. In fact, Django has a shortcut to try to get an object, or return a 404 with the
object does not exist.</p>

<p>So let’s refactor the <strong>board_topics</strong> view again:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span><span class="p">,</span> <span class="n">get_object_or_404</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Board</span>

<span class="k">def</span> <span class="nf">home</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="c"># code suppressed for brevity</span>

<span class="k">def</span> <span class="nf">board_topics</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
    <span class="n">board</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Board</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'topics.html'</span><span class="p">,</span> <span class="p">{</span><span class="s">'board'</span><span class="p">:</span> <span class="n">board</span><span class="p">})</span></code></pre></figure>

<p>Changed the code? Test it.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">python manage.py <span class="nb">test</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">Creating test database for alias 'default'...
System check identified no issues (0 silenced).
.....
----------------------------------------------------------------------
Ran 5 tests in 0.052s

OK
Destroying test database for alias 'default'...</code></pre></figure>

<p>Didn’t break anything. We can proceed with the development.</p>

<p>The next step now is to create the navigation links in the screens. The homepage should have a link to take the visitor
to the topics page of a given <strong>Board</strong>. Similarly, the topics page should have a link back to the homepage.</p>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/wireframe-links.png" alt="Wireframe Links"></p>

<p>We can start by writing some tests for the <code class="highlighter-rouge">HomeTests</code> class:</p>

<p><strong>boards/tests.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">HomeTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">board</span> <span class="o">=</span> <span class="n">Board</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Django'</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">'Django board.'</span><span class="p">)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s">'home'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_home_view_status_code</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_home_url_resolves_home_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">resolve</span><span class="p">(</span><span class="s">'/'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">func</span><span class="p">,</span> <span class="n">home</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_home_view_contains_link_to_topics_page</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">board_topics_url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s">'board_topics'</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">'pk'</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">board</span><span class="o">.</span><span class="n">pk</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertContains</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">response</span><span class="p">,</span> <span class="s">'href="{0}"'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">board_topics_url</span><span class="p">))</span></code></pre></figure>

<p>Observe that now we added a <strong>setUp</strong> method for the <strong>HomeTests</strong> as well. That’s because now we are going to need a
<strong>Board</strong> instance and also we moved the <strong>url</strong> and <strong>response</strong> to the <strong>setUp</strong>, so we can reuse the same response in the
new test.</p>

<p>The new test here is the <strong>test_home_view_contains_link_to_topics_page</strong>. Here we are using the <strong>assertContains</strong>
method to test if the response body contains a given text. The text we are using in the test, is the <code class="highlighter-rouge">href</code> part of an
<code class="highlighter-rouge">a</code> tag. So basically we are testing if the response body has the text <code class="highlighter-rouge">href="/boards/1/"</code>.</p>

<p>Let’s run the tests:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">python manage.py <span class="nb">test</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">Creating test database for alias 'default'...
System check identified no issues (0 silenced).
....F.
======================================================================
FAIL: test_home_view_contains_link_to_topics_page (boards.tests.HomeTests)
----------------------------------------------------------------------
# ...

AssertionError: False is not true : Couldn't find 'href="/boards/1/"' in response

----------------------------------------------------------------------
Ran 6 tests in 0.034s

FAILED (failures=1)
Destroying test database for alias 'default'...</code></pre></figure>

<p>Now we can write the code that will make this test pass.</p>

<p>Edit the <strong>home.html</strong> template:</p>

<p><strong>templates/home.html</strong></p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="c">&lt;!-- code suppressed for brevity --&gt;</span>
<span class="nt">&lt;tbody&gt;</span>
  <span class="cp">{%</span> <span class="k">for</span> <span class="nv">board</span> <span class="ow">in</span> <span class="nv">boards</span> <span class="cp">%}</span>
    <span class="nt">&lt;tr&gt;</span>
      <span class="nt">&lt;td&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'board_topics'</span> <span class="nv">board.pk</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">board.name</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;small</span> <span class="na">class=</span><span class="s">"text-muted d-block"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">board.description</span> <span class="cp">}}</span><span class="nt">&lt;/small&gt;</span>
      <span class="nt">&lt;/td&gt;</span>
      <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"align-middle"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/td&gt;</span>
      <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"align-middle"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/td&gt;</span>
      <span class="nt">&lt;td&gt;&lt;/td&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
  <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;/tbody&gt;</span>
<span class="c">&lt;!-- code suppressed for brevity --&gt;</span></code></pre></figure>

<p>So basically we changed the line:</p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{{</span> <span class="nv">board.name</span> <span class="cp">}}</span></code></pre></figure>

<p>To:</p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'board_topics'</span> <span class="nv">board.pk</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">board.name</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;</span></code></pre></figure>

<p>Always use the <code class="highlighter-rouge"><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">%</span><span class="p">}</span></code> template tag to compose the applications URLs. The first parameter
is the <strong>name</strong> of the URL (defined in the URLconf, i.e., the <strong>urls.py</strong>), then you can pass an arbitrary number of arguments as needed.</p>

<p>If it were a simple URL, like the homepage, it would be just <code class="highlighter-rouge"><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">'home'</span><span class="w"> </span><span class="err">%</span><span class="p">}</span></code>.</p>

<p>Save the file and run the tests again:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">python manage.py <span class="nb">test</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">Creating test database for alias 'default'...
System check identified no issues (0 silenced).
......
----------------------------------------------------------------------
Ran 6 tests in 0.037s

OK
Destroying test database for alias 'default'...</code></pre></figure>

<p>Good! Now we can check how it looks in the web browser:</p>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/boards.png" alt="Boards with Link"></p>

<p>Now the link back. We can write the test first:</p>

<p><strong>boards/tests.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">BoardTopicsTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="c"># code suppressed for brevity...</span>

    <span class="k">def</span> <span class="nf">test_board_topics_view_contains_link_back_to_homepage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">board_topics_url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s">'board_topics'</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">'pk'</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">board_topics_url</span><span class="p">)</span>
        <span class="n">homepage_url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s">'home'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertContains</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="s">'href="{0}"'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">homepage_url</span><span class="p">))</span></code></pre></figure>

<p>Run the tests:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">python manage.py <span class="nb">test</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">Creating test database for alias 'default'...
System check identified no issues (0 silenced).
.F.....
======================================================================
FAIL: test_board_topics_view_contains_link_back_to_homepage (boards.tests.BoardTopicsTests)
----------------------------------------------------------------------
Traceback (most recent call last):
# ...

AssertionError: False is not true : Couldn't find 'href="/"' in response

----------------------------------------------------------------------
Ran 7 tests in 0.054s

FAILED (failures=1)
Destroying test database for alias 'default'...</code></pre></figure>

<p>Update the board topics template:</p>

<p><strong>templates/topics.html</strong></p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="nv">load</span> <span class="nv">static</span> <span class="cp">%}&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span><span class="c">&lt;!-- code suppressed for brevity --&gt;</span><span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;ol</span> <span class="na">class=</span><span class="s">"breadcrumb my-4"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"breadcrumb-item"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'home'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>Boards<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
        <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"breadcrumb-item active"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">board.name</span> <span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;/ol&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<p>Run the tests:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">python manage.py <span class="nb">test</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">Creating test database for alias 'default'...
System check identified no issues (0 silenced).
.......
----------------------------------------------------------------------
Ran 7 tests in 0.061s

OK
Destroying test database for alias 'default'...</code></pre></figure>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/board_topics.png" alt="Board Topics with Link"></p>

<p>As I mentioned before, URL routing is a fundamental part of a web application. With this knowledge, we should be able
to proceed with the development. Next, to complete the section about URLs, you will find a summary of useful URL
patterns.</p>

<h5 id="list-of-useful-url-patterns">List of Useful URL Patterns</h5>

<p>The trick part is the <strong>regex</strong>. So I prepared a list of the most used URL patterns. You can always refer to this
list when you need a specific URL.</p>

<table style="font-size: 1.4rem">
  <thead>
    <tr>
      <th colspan="2" style="font-size: 2rem">Primary Key AutoField</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Regex</th>
      <td><code>(?P&lt;pk&gt;\d+)</code></td>
    </tr>
    <tr>
      <th>Example</th>
      <td><code>url(r'^questions/(?P&lt;pk&gt;\d+)/$', views.question, name='question')</code></td>
    </tr>
    <tr>
      <th>Valid URL</th>
      <td><code>/questions/934/</code></td>
    </tr>
    <tr>
      <th>Captures</th>
      <td><code>{'pk': '934'}</code></td>
    </tr>
  </tbody>
</table>

<table style="font-size: 1.4rem">
  <thead>
    <tr>
      <th colspan="2" style="font-size: 2rem">Slug Field</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Regex</th>
      <td><code>(?P&lt;slug&gt;[-\w]+)</code></td>
    </tr>
    <tr>
      <th>Example</th>
      <td><code>url(r'^posts/(?P&lt;slug&gt;[-\w]+)/$', views.post, name='post')</code></td>
    </tr>
    <tr>
      <th>Valid URL</th>
      <td><code>/posts/hello-world/</code></td>
    </tr>
    <tr>
      <th>Captures</th>
      <td><code>{'slug': 'hello-world'}</code></td>
    </tr>
  </tbody>
</table>

<table style="font-size: 1.4rem">
  <thead>
    <tr>
      <th colspan="2" style="font-size: 2rem">Slug Field with Primary Key</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Regex</th>
      <td><code>(?P&lt;slug&gt;[-\w]+)-(?P&lt;pk&gt;\d+)</code></td>
    </tr>
    <tr>
      <th>Example</th>
      <td><code>url(r'^blog/(?P&lt;slug&gt;[-\w]+)-(?P&lt;pk&gt;\d+)/$', views.blog_post, name='blog_post')</code></td>
    </tr>
    <tr>
      <th>Valid URL</th>
      <td><code>/blog/hello-world-159/</code></td>
    </tr>
    <tr>
      <th>Captures</th>
      <td><code>{'slug': 'hello-world', 'pk': '159'}</code></td>
    </tr>
  </tbody>
</table>

<table style="font-size: 1.4rem">
  <thead>
    <tr>
      <th colspan="2" style="font-size: 2rem">Django User Username</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Regex</th>
      <td><code>(?P&lt;username&gt;[\w.@+-]+)</code></td>
    </tr>
    <tr>
      <th>Example</th>
      <td><code>url(r'^profile/(?P&lt;username&gt;[\w.@+-]+)/$', views.user_profile, name='user_profile')</code></td>
    </tr>
    <tr>
      <th>Valid URL</th>
      <td><code>/profile/vitorfs/</code></td>
    </tr>
    <tr>
      <th>Captures</th>
      <td><code>{'username': 'vitorfs'}</code></td>
    </tr>
  </tbody>
</table>

<table style="font-size: 1.4rem">
  <thead>
    <tr>
      <th colspan="2" style="font-size: 2rem">Year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Regex</th>
      <td><code>(?P&lt;year&gt;[0-9]{4})</code></td>
    </tr>
    <tr>
      <th>Example</th>
      <td><code>url(r'^articles/(?P&lt;year&gt;[0-9]{4})/$', views.year_archive, name='year')</code></td>
    </tr>
    <tr>
      <th>Valid URL</th>
      <td><code>/articles/2016/</code></td>
    </tr>
    <tr>
      <th>Captures</th>
      <td><code>{'year': '2016'}</code></td>
    </tr>
  </tbody>
</table>

<table style="font-size: 1.4rem">
  <thead>
    <tr>
      <th colspan="2" style="font-size: 2rem">Year / Month</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Regex</th>
      <td><code>(?P&lt;year&gt;[0-9]{4})/(?P&lt;month&gt;[0-9]{2})</code></td>
    </tr>
    <tr>
      <th>Example</th>
      <td><code>url(r'^articles/(?P&lt;year&gt;[0-9]{4})/(?P&lt;month&gt;[0-9]{2})/$', views.month_archive, name='month')</code></td>
    </tr>
    <tr>
      <th>Valid URL</th>
      <td><code>/articles/2016/01/</code></td>
    </tr>
    <tr>
      <th>Captures</th>
      <td><code>{'year': '2016', 'month': '01'}</code></td>
    </tr>
  </tbody>
</table>

<p>You can find more details about those patterns in this post: <a href="https://simpleisbetterthancomplex.com/references/2016/10/10/url-patterns.html">List of Useful URL Patterns</a>.</p>

<hr>

<h4 id="reusable-templates">Reusable Templates</h4>

<p>Until now we’ve been copying and pasting HTML repeating several parts of the HTML document, which is not very
sustainable in the long run. It’s also a bad practice.</p>

<p>In this section we are going to refactor our HTML templates, creating a <strong>master page</strong> and only adding the unique part
for each template.</p>

<p>Create a new file named <strong>base.html</strong> in the <strong>templates</strong> folder:</p>

<p><strong>templates/base.html</strong></p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="nv">load</span> <span class="nv">static</span> <span class="cp">%}&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span>Django Boards<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">static</span> <span class="s1">'css/bootstrap.min.css'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;ol</span> <span class="na">class=</span><span class="s">"breadcrumb my-4"</span><span class="nt">&gt;</span>
        <span class="cp">{%</span> <span class="k">block</span> <span class="nv">breadcrumb</span> <span class="cp">%}</span>
        <span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
      <span class="nt">&lt;/ol&gt;</span>
      <span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
      <span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<p>This is going to be our master page. Every template we create, is going to <strong>extend</strong> this special template. Observe
now we introduced the <code class="highlighter-rouge"><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">block</span><span class="w"> </span><span class="err">%</span><span class="p">}</span></code> tag. It is used to reserve a space in the template, which
a “child” template (which extends the master page) can insert code and HTML within that space.</p>

<p>In the case of the <code class="highlighter-rouge"><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">block</span><span class="w"> </span><span class="err">title</span><span class="w"> </span><span class="err">%</span><span class="p">}</span></code> we are also setting a default value, which is
“Django Boards.” It will be used if we don’t set a value for the <code class="highlighter-rouge"><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">block</span><span class="w"> </span><span class="err">title</span><span class="w"> </span><span class="err">%</span><span class="p">}</span></code> in a child
template.</p>

<p>Now let’s refactor our two templates: <strong>home.html</strong> and <strong>topics.html</strong>.</p>

<p><strong>templates/home.html</strong></p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">'base.html'</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">breadcrumb</span> <span class="cp">%}</span>
  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"breadcrumb-item active"</span><span class="nt">&gt;</span>Boards<span class="nt">&lt;/li&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
  <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"table"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;thead</span> <span class="na">class=</span><span class="s">"thead-inverse"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;tr&gt;</span>
        <span class="nt">&lt;th&gt;</span>Board<span class="nt">&lt;/th&gt;</span>
        <span class="nt">&lt;th&gt;</span>Posts<span class="nt">&lt;/th&gt;</span>
        <span class="nt">&lt;th&gt;</span>Topics<span class="nt">&lt;/th&gt;</span>
        <span class="nt">&lt;th&gt;</span>Last Post<span class="nt">&lt;/th&gt;</span>
      <span class="nt">&lt;/tr&gt;</span>
    <span class="nt">&lt;/thead&gt;</span>
    <span class="nt">&lt;tbody&gt;</span>
      <span class="cp">{%</span> <span class="k">for</span> <span class="nv">board</span> <span class="ow">in</span> <span class="nv">boards</span> <span class="cp">%}</span>
        <span class="nt">&lt;tr&gt;</span>
          <span class="nt">&lt;td&gt;</span>
            <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'board_topics'</span> <span class="nv">board.pk</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">board.name</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;</span>
            <span class="nt">&lt;small</span> <span class="na">class=</span><span class="s">"text-muted d-block"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">board.description</span> <span class="cp">}}</span><span class="nt">&lt;/small&gt;</span>
          <span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"align-middle"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"align-middle"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td&gt;&lt;/td&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
      <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
    <span class="nt">&lt;/tbody&gt;</span>
  <span class="nt">&lt;/table&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span></code></pre></figure>

<p>The first line in the <strong>home.html</strong> template is <code class="highlighter-rouge"><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">extends</span><span class="w"> </span><span class="err">'base.html'</span><span class="w"> </span><span class="err">%</span><span class="p">}</span></code>. This tag is telling
Django to use the <strong>base.html</strong> template as a master page. After that, we are using the the <em>blocks</em> to put the unique
content of the page.</p>

<p><strong>templates/topics.html</strong></p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">'base.html'</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span>
  <span class="cp">{{</span> <span class="nv">board.name</span> <span class="cp">}}</span> - <span class="cp">{{</span> <span class="nv">block.super</span> <span class="cp">}}</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">breadcrumb</span> <span class="cp">%}</span>
  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"breadcrumb-item"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'home'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>Boards<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"breadcrumb-item active"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">board.name</span> <span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
    <span class="c">&lt;!-- just leaving it empty for now. we will add core here soon. --&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span></code></pre></figure>

<p>In the <strong>topics.html</strong> template, we are changing the <code class="highlighter-rouge"><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">block</span><span class="w"> </span><span class="err">title</span><span class="w"> </span><span class="err">%</span><span class="p">}</span></code> default value. Notice
that we can reuse the default value of the block by calling <code class="highlighter-rouge"><span class="p">{</span><span class="err">{</span><span class="w"> </span><span class="err">block.super</span><span class="w"> </span><span class="p">}</span><span class="err">}</span></code>. So here we are
playing with the website title, which we defined in the <strong>base.html</strong> as “Django Boards.” So for the “Python” board
page, the title will be “Python - Django Boards,” for the “Random” board the title will be “Random - Django Boards.”</p>

<p>Now let’s run the tests and see we didn’t break anything:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">python manage.py <span class="nb">test</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">Creating test database for alias 'default'...
System check identified no issues (0 silenced).
.......
----------------------------------------------------------------------
Ran 7 tests in 0.067s

OK
Destroying test database for alias 'default'...</code></pre></figure>

<p>Great! Everything is looking good.</p>

<p>Now that we have the <strong>base.html</strong> template, we can easily add a top bar with a menu:</p>

<p><strong>templates/base.html</strong></p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="nv">load</span> <span class="nv">static</span> <span class="cp">%}&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span>Django Boards<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">static</span> <span class="s1">'css/bootstrap.min.css'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>

    <span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">"navbar navbar-expand-lg navbar-dark bg-dark"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"navbar-brand"</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'home'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>Django Boards<span class="nt">&lt;/a&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/nav&gt;</span>

    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;ol</span> <span class="na">class=</span><span class="s">"breadcrumb my-4"</span><span class="nt">&gt;</span>
        <span class="cp">{%</span> <span class="k">block</span> <span class="nv">breadcrumb</span> <span class="cp">%}</span>
        <span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
      <span class="nt">&lt;/ol&gt;</span>
      <span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
      <span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/django-boards-header-1.png" alt="Django Boards Header"></p>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/django-boards-header-2.png" alt="Django Boards Header"></p>

<p>The HTML I used is part of the <a href="https://getbootstrap.com/docs/4.0/components/navbar/" target="_blank">Bootstrap 4 Navbar Component</a>.</p>

<p>A nice touch I like to add is to change the font in the “logo” (<code class="highlighter-rouge">.navbar-brand</code>) of the page.</p>

<p>Go to <a href="https://fonts.google.com/" target="_blank">fonts.google.com</a>, type “Django Boards” or whatever name you gave
to your project then click on <strong>apply to all fonts</strong>. Browse a bit, find one that you like.</p>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/google-fonts.png" alt="Google Fonts"></p>

<p>Add the font in the <strong>base.html</strong> template:</p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="nv">load</span> <span class="nv">static</span> <span class="cp">%}&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span>Django Boards<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"https://fonts.googleapis.com/css?family=Peralta"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">static</span> <span class="s1">'css/bootstrap.min.css'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">static</span> <span class="s1">'css/app.css'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="c">&lt;!-- code suppressed for brevity --&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<p>Now create a new CSS file named <strong>app.css</strong> inside the <strong>static/css</strong> folder:</p>

<p><strong>static/css/app.css</strong></p>

<figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.navbar-brand</span> <span class="p">{</span>
  <span class="nl">font-family</span><span class="p">:</span> <span class="s2">'Peralta'</span><span class="p">,</span> <span class="nb">cursive</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/boards-logo.png" alt="Django Boards Logo"></p>

<hr>

<h4 id="forms">Forms</h4>

<p>Forms are used to deal with user input. It’s a very common task in any web application or website. The standard way
to do it is through HTML forms, where the user input some data, submit it to the server, and then the server does
something with it.</p>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/Pixton_Comic_All_Input.png" alt="All input is evil"></p>

<p>Form processing is a fairly complex task because it involves interacting with many layers of an application. There are
also many issues to take care of. For example, all data submitted to the server comes in a string format, so we have to
transform it into a proper data type (integer, float, date, etc.) before doing anything with it. We have to validate
the data regarding the business logic of the application. We also have to clean, sanitize the data properly so to avoid
security issues such as SQL Injection and XSS attacks.</p>

<p>Good news is that the Django Forms API makes the whole process a lot easier, automating a good chunk of this work. Also,
the final result is a much more secure code than most programmers would be able to implement by themselves. So, no
matter how simple the HTML form is, always use the forms API.</p>

<h5 id="how-not-implement-a-form">How Not Implement a Form</h5>

<p>At first, I thought about jumping straight to the forms API. But I think it would be a good idea for us to spend some
time trying to understand the underlying details of form processing. Otherwise, it will end up looking like magic,
which is a bad thing, because when things go wrong, you have no idea where to look for the problem.</p>

<p>With a deeper understanding of some programming concepts, we can feel more in control of the situation. Being in
control is important because it let us write code with more confidence. The moment we know exactly what is going on,
it’s much easier to implement a code of predictable behavior. It’s also a lot easier to debug and find errors because
you know where to look.</p>

<p>Anyway, let’s start by implementing the form below:</p>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/wireframe-new-topic.png" alt="Wireframe New Topic"></p>

<p>It’s one of the wireframes we drew in the previous tutorial. I now realize this may be a bad example to start because
this particular form involves processing data of two different models: <strong>Topic</strong> (subject) and <strong>Post</strong> (message).</p>

<p>There’s another important aspect that we haven’t discussed it so far, which is user authentication. We are only
supposed to show this screen for authenticated users. This way we can tell who created a <strong>Topic</strong> or a <strong>Post</strong>.</p>

<p>So let’s abstract some details for now and focus on understanding how to save user input in the database.</p>

<p>First thing, let’s create a new URL route named <strong>new_topic</strong>:</p>

<p><strong>myproject/urls.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="kn">from</span> <span class="nn">boards</span> <span class="kn">import</span> <span class="n">views</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">home</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'home'</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^boards/(?P&lt;pk&gt;</span><span class="err">\</span><span class="s">d+)/$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">board_topics</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'board_topics'</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^boards/(?P&lt;pk&gt;</span><span class="err">\</span><span class="s">d+)/new/$'</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">new_topic</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'new_topic'</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^admin/'</span><span class="p">,</span> <span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">),</span>
<span class="p">]</span></code></pre></figure>

<p>The way we are building the URL will help us identify the correct <strong>Board</strong>.</p>

<p>Now let’s create the <strong>new_topic</strong> view function:</p>

<p><strong>boards/views.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span><span class="p">,</span> <span class="n">get_object_or_404</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Board</span>

<span class="k">def</span> <span class="nf">new_topic</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
    <span class="n">board</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Board</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'new_topic.html'</span><span class="p">,</span> <span class="p">{</span><span class="s">'board'</span><span class="p">:</span> <span class="n">board</span><span class="p">})</span></code></pre></figure>

<p>For now, the <strong>new_topic</strong> view function is looking exactly the same as the <strong>board_topics</strong>. That’s on purpose, let’s
take a step at a time.</p>

<p>Now we just need a template named <strong>new_topic.html</strong> to see some code working:</p>

<p><strong>templates/new_topic.html</strong></p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">'base.html'</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span>Start a New Topic<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">breadcrumb</span> <span class="cp">%}</span>
  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"breadcrumb-item"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'home'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>Boards<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"breadcrumb-item"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'board_topics'</span> <span class="nv">board.pk</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">board.name</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"breadcrumb-item active"</span><span class="nt">&gt;</span>New topic<span class="nt">&lt;/li&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span></code></pre></figure>

<p>For now we just have the breadcrumb assuring the navigation. Observe that we included the URL back to the
<strong>board_topics</strong> view.</p>

<p>Open the URL <strong>http://127.0.0.1:8000/boards/1/new/</strong>. The result, for now, is the following page:</p>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/start-a-new-topic.png" alt="Start a New Topic"></p>

<p>We still haven’t implemented a way to reach this new page, but if we change the URL to
<strong>http://127.0.0.1:8000/boards/2/new/</strong>, it should take us to the <strong>Python Board</strong>:</p>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/start-a-new-topic-python.png" alt="Start a New Topic"></p>

<div class="info">
  <p>
    <strong><i class="fa fa-info-circle"></i> Note:</strong>
  </p>
  <p>
    The result may be different for you if you haven't followed the steps from the previous tutorial. In my case, I
    have three <strong>Board</strong> instances in the database, being Django = 1, Python = 2, and Random = 3. Those
    numbers are the IDs from the database, used from the URL to identify the right resource.
  </p>
</div>

<p>We can already add some tests:</p>

<p><strong>boards/tests.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.core.urlresolvers</span> <span class="kn">import</span> <span class="n">reverse</span>
<span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">resolve</span>
<span class="kn">from</span> <span class="nn">django.test</span> <span class="kn">import</span> <span class="n">TestCase</span>
<span class="kn">from</span> <span class="nn">.views</span> <span class="kn">import</span> <span class="n">home</span><span class="p">,</span> <span class="n">board_topics</span><span class="p">,</span> <span class="n">new_topic</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Board</span>

<span class="k">class</span> <span class="nc">HomeTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="c"># ...</span>

<span class="k">class</span> <span class="nc">BoardTopicsTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="c"># ...</span>

<span class="k">class</span> <span class="nc">NewTopicTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">Board</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Django'</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">'Django board.'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_new_topic_view_success_status_code</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s">'new_topic'</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">'pk'</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_new_topic_view_not_found_status_code</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s">'new_topic'</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">'pk'</span><span class="p">:</span> <span class="mi">99</span><span class="p">})</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">404</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_new_topic_url_resolves_new_topic_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">resolve</span><span class="p">(</span><span class="s">'/boards/1/new/'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">func</span><span class="p">,</span> <span class="n">new_topic</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_new_topic_view_contains_link_back_to_board_topics_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">new_topic_url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s">'new_topic'</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">'pk'</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="n">board_topics_url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s">'board_topics'</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">'pk'</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">new_topic_url</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertContains</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="s">'href="{0}"'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">board_topics_url</span><span class="p">))</span></code></pre></figure>

<p>A quick summary of the tests of our new class <strong>NewTopicTests</strong>:</p>

<ul>
  <li><strong>setUp</strong>: creates a <strong>Board</strong> instance to be used during the tests</li>
  <li><strong>test_new_topic_view_success_status_code</strong>: check if the request to the view is successful</li>
  <li><strong>test_new_topic_view_not_found_status_code</strong>: check if the view is raising a 404 error when the <strong>Board</strong> does not
exist</li>
  <li><strong>test_new_topic_url_resolves_new_topic_view</strong>: check if the right view is being used</li>
  <li><strong>test_new_topic_view_contains_link_back_to_board_topics_view</strong>: ensure the navigation back to the list of topics</li>
</ul>

<p>Run the tests:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">python manage.py <span class="nb">test</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">Creating test database for alias 'default'...
System check identified no issues (0 silenced).
...........
----------------------------------------------------------------------
Ran 11 tests in 0.076s

OK
Destroying test database for alias 'default'...</code></pre></figure>

<p>Good, now it’s time to start creating the form.</p>

<p><strong>templates/new_topic.html</strong></p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">'base.html'</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span>Start a New Topic<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">breadcrumb</span> <span class="cp">%}</span>
  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"breadcrumb-item"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'home'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>Boards<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"breadcrumb-item"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'board_topics'</span> <span class="nv">board.pk</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">board.name</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"breadcrumb-item active"</span><span class="nt">&gt;</span>New topic<span class="nt">&lt;/li&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
  <span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="cp">{%</span> <span class="nv">csrf_token</span> <span class="cp">%}</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"id_subject"</span><span class="nt">&gt;</span>Subject<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"id_subject"</span> <span class="na">name=</span><span class="s">"subject"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"id_message"</span><span class="nt">&gt;</span>Message<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;textarea</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"id_message"</span> <span class="na">name=</span><span class="s">"message"</span> <span class="na">rows=</span><span class="s">"5"</span><span class="nt">&gt;&lt;/textarea&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">class=</span><span class="s">"btn btn-success"</span><span class="nt">&gt;</span>Post<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/form&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span></code></pre></figure>

<p>This is a raw HTML form created by hand using the CSS classes provided by Bootstrap 4. It looks like this:</p>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/start-a-new-topic-form.png" alt="Start a New Topic"></p>

<p>In the <code class="highlighter-rouge">&lt;form&gt;</code> tag, we have to define the <code class="highlighter-rouge">method</code> attribute. This instructs the browser on how
we want to communicate with the server. The HTTP spec defines several request methods (verbs). But for the most part,
we will only be using <strong>GET</strong> and <strong>POST</strong> request types.</p>

<p><strong>GET</strong> is perhaps the most common request type. It’s used to <em>retrieve</em> data from the server. Every time you click on
a link or type a URL directly into the browser, you are creating a <strong>GET</strong> request.</p>

<p><strong>POST</strong> is used when we want to change data on the server. So, generally speaking, every time we send data to the
server that will result in a change in the state of a resource, we should always send it via <strong>POST</strong> request.</p>

<p>Django protects all <strong>POST</strong> requests using a <strong>CSRF Token</strong> (Cross-Site Request Forgery Token). It’s a security
measure to avoid external sites or applications to submit data to our application. Every time the application receives
a <strong>POST</strong>, it will first look for the <strong>CSRF Token</strong>. If the request has no token, or the token is invalid, it will
discard the posted data.</p>

<p>The result of the <strong>csrf_token</strong> template tag:</p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="nv">csrf_token</span> <span class="cp">%}</span></code></pre></figure>

<p>Is a hidden field that’s submitted along with the other form data:</p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"csrfmiddlewaretoken"</span> <span class="na">value=</span><span class="s">"jG2o6aWj65YGaqzCpl0TYTg5jn6SctjzRZ9KmluifVx0IVaxlwh97YarZKs54Y32"</span><span class="nt">&gt;</span></code></pre></figure>

<p>Another thing, we have to set the <strong>name</strong> of the HTML inputs. The <strong>name</strong> will be used to retrieve the data on the
server side.</p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"id_subject"</span> <span class="na">name=</span><span class="s">"subject"</span><span class="nt">&gt;</span>
<span class="nt">&lt;textarea</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"id_message"</span> <span class="na">name=</span><span class="s">"message"</span> <span class="na">rows=</span><span class="s">"5"</span><span class="nt">&gt;&lt;/textarea&gt;</span></code></pre></figure>

<p>Here is how we retrieve the data:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">subject</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">[</span><span class="s">'subject'</span><span class="p">]</span>
<span class="n">message</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">[</span><span class="s">'message'</span><span class="p">]</span></code></pre></figure>

<p>So, a naïve implementation of a view that grabs the data from the HTML and starts a new topic can be written like this:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>
<span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">get_object_or_404</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Board</span><span class="p">,</span> <span class="n">Topic</span><span class="p">,</span> <span class="n">Post</span>

<span class="k">def</span> <span class="nf">new_topic</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
    <span class="n">board</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Board</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'POST'</span><span class="p">:</span>
        <span class="n">subject</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">[</span><span class="s">'subject'</span><span class="p">]</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">[</span><span class="s">'message'</span><span class="p">]</span>

        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>  <span class="c"># TODO: get the currently logged in user</span>

        <span class="n">topic</span> <span class="o">=</span> <span class="n">Topic</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
            <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span>
            <span class="n">board</span><span class="o">=</span><span class="n">board</span><span class="p">,</span>
            <span class="n">starter</span><span class="o">=</span><span class="n">user</span>
        <span class="p">)</span>

        <span class="n">post</span> <span class="o">=</span> <span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
            <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
            <span class="n">topic</span><span class="o">=</span><span class="n">topic</span><span class="p">,</span>
            <span class="n">created_by</span><span class="o">=</span><span class="n">user</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s">'board_topics'</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">board</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>  <span class="c"># TODO: redirect to the created topic page</span>

    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'new_topic.html'</span><span class="p">,</span> <span class="p">{</span><span class="s">'board'</span><span class="p">:</span> <span class="n">board</span><span class="p">})</span></code></pre></figure>

<p>This view is only considering the <em>happy path</em>, which is receiving the data and saving it into the database.
But there are some missing parts. We are not validating the data. The user could submit an empty form or a <strong>subject</strong>
that’s bigger than 255 characters.</p>

<p>So far we are hard-coding the <strong>User</strong> fields because we haven’t implemented the authentication yet. But there’s an
easy way to identify the logged in user. We will get to that part in the next tutorial. Also, we haven’t implemented
the view where we will list all the posts within a topic, so upon success, we are redirecting the user to the page
where we list all the board topics.</p>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/start-a-new-topic-form-submit.png" alt="Start a New Topic"></p>

<p>Submitted the form clicking on the <strong>Post</strong> button:</p>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/topics-2.png" alt="Topics"></p>

<p>It looks like it worked. But we haven’t implemented the topics listing yet, so there’s nothing to see here. Let’s edit
the <strong>templates/topics.html</strong> file to do a proper listing:</p>

<p><strong>templates/topics.html</strong></p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">'base.html'</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span>
  <span class="cp">{{</span> <span class="nv">board.name</span> <span class="cp">}}</span> - <span class="cp">{{</span> <span class="nv">block.super</span> <span class="cp">}}</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">breadcrumb</span> <span class="cp">%}</span>
  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"breadcrumb-item"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'home'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>Boards<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"breadcrumb-item active"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">board.name</span> <span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
  <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"table"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;thead</span> <span class="na">class=</span><span class="s">"thead-inverse"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;tr&gt;</span>
        <span class="nt">&lt;th&gt;</span>Topic<span class="nt">&lt;/th&gt;</span>
        <span class="nt">&lt;th&gt;</span>Starter<span class="nt">&lt;/th&gt;</span>
        <span class="nt">&lt;th&gt;</span>Replies<span class="nt">&lt;/th&gt;</span>
        <span class="nt">&lt;th&gt;</span>Views<span class="nt">&lt;/th&gt;</span>
        <span class="nt">&lt;th&gt;</span>Last Update<span class="nt">&lt;/th&gt;</span>
      <span class="nt">&lt;/tr&gt;</span>
    <span class="nt">&lt;/thead&gt;</span>
    <span class="nt">&lt;tbody&gt;</span>
      <span class="cp">{%</span> <span class="k">for</span> <span class="nv">topic</span> <span class="ow">in</span> <span class="nv">board.topics.all</span> <span class="cp">%}</span>
        <span class="nt">&lt;tr&gt;</span>
          <span class="nt">&lt;td&gt;</span><span class="cp">{{</span> <span class="nv">topic.subject</span> <span class="cp">}}</span><span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td&gt;</span><span class="cp">{{</span> <span class="nv">topic.starter.username</span> <span class="cp">}}</span><span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td&gt;</span>0<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td&gt;</span>0<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td&gt;</span><span class="cp">{{</span> <span class="nv">topic.last_updated</span> <span class="cp">}}</span><span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
      <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
    <span class="nt">&lt;/tbody&gt;</span>
  <span class="nt">&lt;/table&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span></code></pre></figure>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/topics-3.png" alt="Topics"></p>

<p>Yep! The <strong>Topic</strong> we created is here.</p>

<p>Two new concepts here:</p>

<p>We are using for the first time the <strong>topics</strong> property in the <strong>Board</strong> model. The <strong>topics</strong> property is created
automatically by Django using a reverse relationship. In the previous steps, we created a <strong>Topic</strong> instance:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">new_topic</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
    <span class="n">board</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Board</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>

    <span class="c"># ...</span>

    <span class="n">topic</span> <span class="o">=</span> <span class="n">Topic</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span>
        <span class="n">board</span><span class="o">=</span><span class="n">board</span><span class="p">,</span>
        <span class="n">starter</span><span class="o">=</span><span class="n">user</span>
    <span class="p">)</span></code></pre></figure>

<p>In the line <code class="highlighter-rouge">board=board</code>, we set the <strong>board</strong> field in <strong>Topic</strong> model, which is a <code class="highlighter-rouge">ForeignKey(Board)</code>. With that,
now our <strong>Board</strong> instance is aware that it has an <strong>Topic</strong> instance associated with it.</p>

<p>The reason why we used <code class="highlighter-rouge">board.topics.all</code> instead of just <code class="highlighter-rouge">board.topics</code> is because <code class="highlighter-rouge">board.topics</code> is a
<strong>Related Manager</strong>, which is pretty much similar to a <strong>Model Manager</strong>, usually available on the <code class="highlighter-rouge">board.objects</code>
property. So, to return all topics associated with a given board, we have to run <code class="highlighter-rouge">board.topics.all()</code>. To filter some
data, we could do <code class="highlighter-rouge">board.topics.filter(subject__contains='Hello')</code>.</p>

<p>Another important thing to note is that, inside Python code, we have to use parenthesis: <code class="highlighter-rouge">board.topics.all()</code>,
because <code class="highlighter-rouge">all()</code> is a method. When writing code using the Django Template Language, in an HTML template file, we don’t
use parenthesis, so it’s just <code class="highlighter-rouge">board.topics.all</code>.</p>

<p>The second thing is that we are making use of a <code class="highlighter-rouge">ForeignKey</code>:</p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{{</span> <span class="nv">topic.starter.username</span> <span class="cp">}}</span></code></pre></figure>

<p>Just create a <em>path</em> through the property using dots. We can pretty much access any property of the <strong>User</strong> model.
If we wanted the user’s email, we could use <code class="highlighter-rouge">topic.starter.email</code>.</p>

<p>Since we are already modifying the <strong>topics.html</strong> template, let’s create the button that takes us to the <strong>new topic</strong>
screen:</p>

<p><strong>templates/topics.html</strong></p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"mb-4"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'new_topic'</span> <span class="nv">board.pk</span> <span class="cp">%}</span><span class="s">"</span> <span class="na">class=</span><span class="s">"btn btn-primary"</span><span class="nt">&gt;</span>New topic<span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

  <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"table"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- code suppressed for brevity --&gt;</span>
  <span class="nt">&lt;/table&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span></code></pre></figure>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/topics-4.png" alt="Topics"></p>

<p>We can include a test to make sure the user can reach the <strong>New topic</strong> view from this page:</p>

<p><strong>boards/tests.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">BoardTopicsTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="c"># ...</span>

    <span class="k">def</span> <span class="nf">test_board_topics_view_contains_navigation_links</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">board_topics_url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s">'board_topics'</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">'pk'</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="n">homepage_url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s">'home'</span><span class="p">)</span>
        <span class="n">new_topic_url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s">'new_topic'</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">'pk'</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">board_topics_url</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertContains</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="s">'href="{0}"'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">homepage_url</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertContains</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="s">'href="{0}"'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">new_topic_url</span><span class="p">))</span></code></pre></figure>

<p>Basically here I renamed the old <strong>test_board_topics_view_contains_link_back_to_homepage</strong> method and add an extra
<code class="highlighter-rouge">assertContains</code>. This test is now responsible for making sure our view contains the required navigation links.</p>

<h5 id="testing-the-form-view">Testing The Form View</h5>

<p>Before we code the previous form example in a Django way, let’s write some tests for the form processing:</p>

<p><strong>boards/tests.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="s">''' new imports below '''</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>
<span class="kn">from</span> <span class="nn">.views</span> <span class="kn">import</span> <span class="n">new_topic</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Board</span><span class="p">,</span> <span class="n">Topic</span><span class="p">,</span> <span class="n">Post</span>

<span class="k">class</span> <span class="nc">NewTopicTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">Board</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Django'</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">'Django board.'</span><span class="p">)</span>
        <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create_user</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s">'john'</span><span class="p">,</span> <span class="n">email</span><span class="o">=</span><span class="s">'john@doe.com'</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s">'123'</span><span class="p">)</span>  <span class="c"># &lt;- included this line here</span>

    <span class="c"># ...</span>

    <span class="k">def</span> <span class="nf">test_csrf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s">'new_topic'</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">'pk'</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertContains</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="s">'csrfmiddlewaretoken'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_new_topic_valid_post_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s">'new_topic'</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">'pk'</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">'subject'</span><span class="p">:</span> <span class="s">'Test title'</span><span class="p">,</span>
            <span class="s">'message'</span><span class="p">:</span> <span class="s">'Lorem ipsum dolor sit amet'</span>
        <span class="p">}</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">Topic</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">exists</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">exists</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">test_new_topic_invalid_post_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">'''
        Invalid post data should not redirect
        The expected behavior is to show the form again with validation errors
        '''</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s">'new_topic'</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">'pk'</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="p">{})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_new_topic_invalid_post_data_empty_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">'''
        Invalid post data should not redirect
        The expected behavior is to show the form again with validation errors
        '''</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s">'new_topic'</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">'pk'</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">'subject'</span><span class="p">:</span> <span class="s">''</span><span class="p">,</span>
            <span class="s">'message'</span><span class="p">:</span> <span class="s">''</span>
        <span class="p">}</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">Topic</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">exists</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">exists</span><span class="p">())</span></code></pre></figure>

<p>First thing, the <strong>tests.py</strong> file is already starting to get big. We will improve it soon, breaking the tests into
several files. But for now, let’s keep working on it.</p>

<ul>
  <li><strong>setUp</strong>: included the <code class="highlighter-rouge">User.objects.create_user</code> to create a <strong>User</strong> instance to be used in the tests</li>
  <li><strong>test_csrf</strong>: since the <strong>CSRF Token</strong> is a fundamental part of processing <strong>POST</strong> requests, we have to make
sure our HTML contains the token.</li>
  <li><strong>test_new_topic_valid_post_data</strong>: sends a valid combination of data and check if the view created a <strong>Topic</strong>
instance and a <strong>Post</strong> instance.</li>
  <li><strong>test_new_topic_invalid_post_data</strong>: here we are sending an empty dictionary to check how the application is
behaving.</li>
  <li><strong>test_new_topic_invalid_post_data_empty_fields</strong>: similar to the previous test, but this time we are sending some
data. The application is expected to validate and reject empty subject and message.</li>
</ul>

<p>Let’s run the tests:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">python manage.py <span class="nb">test</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">Creating test database for alias 'default'...
System check identified no issues (0 silenced).
........EF.....
======================================================================
ERROR: test_new_topic_invalid_post_data (boards.tests.NewTopicTests)
----------------------------------------------------------------------
Traceback (most recent call last):
...
django.utils.datastructures.MultiValueDictKeyError: "'subject'"

======================================================================
FAIL: test_new_topic_invalid_post_data_empty_fields (boards.tests.NewTopicTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/vitorfs/Development/myproject/django-beginners-guide/boards/tests.py", line 115, in test_new_topic_invalid_post_data_empty_fields
    self.assertEquals(response.status_code, 200)
AssertionError: 302 != 200

----------------------------------------------------------------------
Ran 15 tests in 0.512s

FAILED (failures=1, errors=1)
Destroying test database for alias 'default'...</code></pre></figure>

<p>We have one failing test and one error. Both related to invalid user input. Instead of trying to fix it with the
current implementation, let’s make those tests pass using the Django Forms API.</p>

<h4 id="creating-forms-the-right-way">Creating Forms The Right Way</h4>

<p>So, we came a long way since we started working with Forms. Finally, it’s time to use the Forms API.</p>

<p>The Forms API is available in the module <code class="highlighter-rouge">django.forms</code>. Django works with two types of forms: <code class="highlighter-rouge">forms.Form</code> and
<code class="highlighter-rouge">forms.ModelForm</code>. The <code class="highlighter-rouge">Form</code> class is a general purpose form implementation. We can use it to process data that are
not directly associated with a model in our application. A <code class="highlighter-rouge">ModelForm</code> is a subclass of <code class="highlighter-rouge">Form</code>, and it’s associated
with a model class.</p>

<p>Let’s create a new file named <strong>forms.py</strong> inside the <strong>boards</strong>’ folder:</p>

<p><strong>boards/forms.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Topic</span>

<span class="k">class</span> <span class="nc">NewTopicForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">forms</span><span class="o">.</span><span class="n">Textarea</span><span class="p">(),</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">4000</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Topic</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">'subject'</span><span class="p">,</span> <span class="s">'message'</span><span class="p">]</span></code></pre></figure>

<p>This is our first form. It’s a <code class="highlighter-rouge">ModelForm</code> associated with the <strong>Topic</strong> model. The <code class="highlighter-rouge">subject</code> in the <code class="highlighter-rouge">fields</code> list
inside the <strong>Meta</strong> class is referring to the <code class="highlighter-rouge">subject</code> field in the <strong>Topic</strong> class. Now observe that we are
defining an extra field named <code class="highlighter-rouge">message</code>. This refers to the message in the <strong>Post</strong> we want to save.</p>

<p>Now we have to refactor our <strong>views.py</strong>:</p>

<p><strong>boards/views.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>
<span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">get_object_or_404</span>
<span class="kn">from</span> <span class="nn">.forms</span> <span class="kn">import</span> <span class="n">NewTopicForm</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Board</span><span class="p">,</span> <span class="n">Topic</span><span class="p">,</span> <span class="n">Post</span>

<span class="k">def</span> <span class="nf">new_topic</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
    <span class="n">board</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Board</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>  <span class="c"># TODO: get the currently logged in user</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'POST'</span><span class="p">:</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">NewTopicForm</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">topic</span> <span class="o">=</span> <span class="n">form</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">commit</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
            <span class="n">topic</span><span class="o">.</span><span class="n">board</span> <span class="o">=</span> <span class="n">board</span>
            <span class="n">topic</span><span class="o">.</span><span class="n">starter</span> <span class="o">=</span> <span class="n">user</span>
            <span class="n">topic</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="n">post</span> <span class="o">=</span> <span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
                <span class="n">message</span><span class="o">=</span><span class="n">form</span><span class="o">.</span><span class="n">cleaned_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'message'</span><span class="p">),</span>
                <span class="n">topic</span><span class="o">=</span><span class="n">topic</span><span class="p">,</span>
                <span class="n">created_by</span><span class="o">=</span><span class="n">user</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s">'board_topics'</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">board</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>  <span class="c"># TODO: redirect to the created topic page</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">NewTopicForm</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'new_topic.html'</span><span class="p">,</span> <span class="p">{</span><span class="s">'board'</span><span class="p">:</span> <span class="n">board</span><span class="p">,</span> <span class="s">'form'</span><span class="p">:</span> <span class="n">form</span><span class="p">})</span></code></pre></figure>

<p>This is how we use the forms in a view. Let me remove the extra noise so we can focus on the core of the form
processing:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'POST'</span><span class="p">:</span>
    <span class="n">form</span> <span class="o">=</span> <span class="n">NewTopicForm</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
        <span class="n">topic</span> <span class="o">=</span> <span class="n">form</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s">'board_topics'</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">board</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">form</span> <span class="o">=</span> <span class="n">NewTopicForm</span><span class="p">()</span>
<span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'new_topic.html'</span><span class="p">,</span> <span class="p">{</span><span class="s">'form'</span><span class="p">:</span> <span class="n">form</span><span class="p">})</span></code></pre></figure>

<p>First we check if the request is a <strong>POST</strong> or a <strong>GET</strong>. If the request came from a <strong>POST</strong>, it means the user is
submitting some data to the server. So we instantiate a form instance passing the <strong>POST</strong> data to the form:
<code class="highlighter-rouge">form = NewTopicForm(request.POST)</code>.</p>

<p>Then, we ask Django to verify the data, check if the form is valid if we can save it in the database: <code class="highlighter-rouge">if form.is_valid():</code>.
If the form was valid, we proceed to save the data in the database using <code class="highlighter-rouge">form.save()</code>. The <code class="highlighter-rouge">save()</code> method returns
an instance of the Model saved into the database. So, since this is a <strong>Topic</strong> form, it will return the <strong>Topic</strong>
that was created: <code class="highlighter-rouge">topic = form.save()</code>. After that, the common path is to redirect the user somewhere else, both to
avoid the user re-submitting the form by pressing F5 and also to keep the flow of the application.</p>

<p>Now, if the data was invalid, Django will add a list of errors to the form. After that, the view does nothing and
returns in the last statement: <code class="highlighter-rouge">return render(request, 'new_topic.html', {'form': form})</code>. That means we have to
update the <strong>new_topic.html</strong> to display errors properly.</p>

<p>If the request was a <strong>GET</strong>, we just initialize a new and empty form using <code class="highlighter-rouge">form = NewTopicForm()</code>.</p>

<p>Let’s run the tests and see how is everything:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">python manage.py <span class="nb">test</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">Creating test database for alias 'default'...
System check identified no issues (0 silenced).
...............
----------------------------------------------------------------------
Ran 15 tests in 0.522s

OK
Destroying test database for alias 'default'...</code></pre></figure>

<p>We even fixed the last two tests.</p>

<p>The Django Forms API does much more than processing and validating the data. It also generates the HTML for us.</p>

<p>Let’s update the <strong>new_topic.html</strong> template to fully use the Django Forms API:</p>

<p><strong>templates/new_topic.html</strong></p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">'base.html'</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span>Start a New Topic<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">breadcrumb</span> <span class="cp">%}</span>
  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"breadcrumb-item"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'home'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>Boards<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"breadcrumb-item"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'board_topics'</span> <span class="nv">board.pk</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">board.name</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"breadcrumb-item active"</span><span class="nt">&gt;</span>New topic<span class="nt">&lt;/li&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
  <span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="cp">{%</span> <span class="nv">csrf_token</span> <span class="cp">%}</span>
    <span class="cp">{{</span> <span class="nv">form.as_p</span> <span class="cp">}}</span>
    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">class=</span><span class="s">"btn btn-success"</span><span class="nt">&gt;</span>Post<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/form&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span></code></pre></figure>

<p>The <code class="highlighter-rouge">form</code> have three rendering options: <code class="highlighter-rouge">form.as_table</code>, <code class="highlighter-rouge">form.as_ul</code>, and <code class="highlighter-rouge">form.as_p</code>. It’s a quick way to render
all the fields of a form. As the name suggests, the <code class="highlighter-rouge">as_table</code> uses table tags to format the inputs, the <code class="highlighter-rouge">as_ul</code>
creates an HTML list of inputs, etc.</p>

<p>Let’s see how it looks like:</p>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/start-a-new-topic-form-django.png" alt="Start a New Topic"></p>

<p>Well, our previous form was looking better, right? We are going to fix it in a moment.</p>

<p>It can look broken right now but trust me; there’s a lot of things behind it right now. And it’s extremely powerful.
For example, if our form had 50 fields, we could render all the fields just by typing <code class="highlighter-rouge"><span class="p">{</span><span class="err">{</span><span class="w"> </span><span class="err">form.as_p</span><span class="w"> </span><span class="p">}</span><span class="err">}</span></code>.</p>

<p>And more, using the Forms API, Django will validate the data and add error messages to each field. Let’s try submitting
an empty form:</p>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/form-validation.png" alt="Form Validation"></p>

<div class="info">
  <p>
    <strong><i class="fa fa-info-circle"></i> Note:</strong>
  </p>
  <p>
    If you see something like this:
    <img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/novalidate.png" alt="Please fill out this field." style="display: inline!important;">
    when you submit the form, that's not Django. It's your browser doing a pre-validation. To disable it add the
    <code>novalidate</code> attribute to your form tag: <code>&lt;form method="post" novalidate&gt;</code>
  </p>
  <p>
    You can keep it; there's no problem with it. It's just because our form is very simple right now, and we don't
    have much data validation to see.
  </p>
  <p>
    Another important thing to note is that: there is no such a thing as "client-side validation." JavaScript
    validation or browser validation is just for <strong>usability</strong> purpose. And also to reduce the number of
    requests to the server. Data validation should always be done on the server side, where we have full control over
    the data.
  </p>
</div>

<p>It also handles help texts, which can be defined both in a <strong>Form</strong> class or in a <strong>Model</strong> class:</p>

<p><strong>boards/forms.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Topic</span>

<span class="k">class</span> <span class="nc">NewTopicForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">widget</span><span class="o">=</span><span class="n">forms</span><span class="o">.</span><span class="n">Textarea</span><span class="p">(),</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">4000</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="s">'The max length of the text is 4000.'</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Topic</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">'subject'</span><span class="p">,</span> <span class="s">'message'</span><span class="p">]</span></code></pre></figure>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/help-text.png" alt="Help Text"></p>

<p>We can also set extra attributes to a form field:</p>

<p><strong>boards/forms.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Topic</span>

<span class="k">class</span> <span class="nc">NewTopicForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">widget</span><span class="o">=</span><span class="n">forms</span><span class="o">.</span><span class="n">Textarea</span><span class="p">(</span>
            <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">'rows'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s">'placeholder'</span><span class="p">:</span> <span class="s">'What is on your mind?'</span><span class="p">}</span>
        <span class="p">),</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">4000</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="s">'The max length of the text is 4000.'</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Topic</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">'subject'</span><span class="p">,</span> <span class="s">'message'</span><span class="p">]</span></code></pre></figure>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/form-placeholder.png" alt="Form Placeholder"></p>

<h5 id="rendering-bootstrap-forms">Rendering Bootstrap Forms</h5>

<p>Alright, so let’s make things pretty again.</p>

<p>When working with Bootstrap or any other Front-End library, I like to use a Django package called
<strong>django-widget-tweaks</strong>. It gives us more control over the rendering process, keeping the defaults and just adding
extra customizations on top of it.</p>

<p>Let’s start off by installing it:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">pip install django-widget-tweaks</code></pre></figure>

<p>Now add it to the <code class="highlighter-rouge">INSTALLED_APPS</code>:</p>

<p><strong>myproject/settings.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">'django.contrib.admin'</span><span class="p">,</span>
    <span class="s">'django.contrib.auth'</span><span class="p">,</span>
    <span class="s">'django.contrib.contenttypes'</span><span class="p">,</span>
    <span class="s">'django.contrib.sessions'</span><span class="p">,</span>
    <span class="s">'django.contrib.messages'</span><span class="p">,</span>
    <span class="s">'django.contrib.staticfiles'</span><span class="p">,</span>

    <span class="s">'widget_tweaks'</span><span class="p">,</span>

    <span class="s">'boards'</span><span class="p">,</span>
<span class="p">]</span></code></pre></figure>

<p>Now let’s take it into use:</p>

<p><strong>templates/new_topic.html</strong></p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">'base.html'</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="nv">load</span> <span class="nv">widget_tweaks</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span>Start a New Topic<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">breadcrumb</span> <span class="cp">%}</span>
  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"breadcrumb-item"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'home'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>Boards<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"breadcrumb-item"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'board_topics'</span> <span class="nv">board.pk</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">board.name</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"breadcrumb-item active"</span><span class="nt">&gt;</span>New topic<span class="nt">&lt;/li&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
  <span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"post"</span> <span class="na">novalidate</span><span class="nt">&gt;</span>
    <span class="cp">{%</span> <span class="nv">csrf_token</span> <span class="cp">%}</span>

    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">field</span> <span class="ow">in</span> <span class="nv">form</span> <span class="cp">%}</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
        <span class="cp">{{</span> <span class="nv">field.label_tag</span> <span class="cp">}}</span>

        <span class="cp">{%</span> <span class="nv">render_field</span> <span class="nv">field</span> <span class="nv">class</span><span class="err">=</span><span class="s2">"form-control"</span> <span class="cp">%}</span>

        <span class="cp">{%</span> <span class="k">if</span> <span class="nv">field.help_text</span> <span class="cp">%}</span>
          <span class="nt">&lt;small</span> <span class="na">class=</span><span class="s">"form-text text-muted"</span><span class="nt">&gt;</span>
            <span class="cp">{{</span> <span class="nv">field.help_text</span> <span class="cp">}}</span>
          <span class="nt">&lt;/small&gt;</span>
        <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>

    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">class=</span><span class="s">"btn btn-success"</span><span class="nt">&gt;</span>Post<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/form&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span></code></pre></figure>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/bootstrap-form.png" alt="Bootstrap Form"></p>

<p>There it is! So, here we are using the <strong>django-widget-tweaks</strong>. First, we load it in the template by using the
<code class="highlighter-rouge"><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">load</span><span class="w"> </span><span class="err">widget_tweaks</span><span class="w"> </span><span class="err">%</span><span class="p">}</span></code> template tag. Then the usage:</p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="nv">render_field</span> <span class="nv">field</span> <span class="nv">class</span><span class="err">=</span><span class="s2">"form-control"</span> <span class="cp">%}</span></code></pre></figure>

<p>The <code class="highlighter-rouge">render_field</code> tag is not part of Django; it lives inside the package we installed. To use it we have to pass a
form field instance as the first parameter, and then after we can add arbitrary HTML attributes to complement it. It
will be useful because then we can assign classes based on certain conditions.</p>

<p>Some examples of the <code class="highlighter-rouge">render_field</code> template tag:</p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="nv">render_field</span> <span class="nv">form.subject</span> <span class="nv">class</span><span class="err">=</span><span class="s2">"form-control"</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="nv">render_field</span> <span class="nv">form.message</span> <span class="nv">class</span><span class="err">=</span><span class="s2">"form-control"</span> <span class="nv">placeholder</span><span class="err">=</span><span class="nv">form.message.label</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="nv">render_field</span> <span class="nv">field</span> <span class="nv">class</span><span class="err">=</span><span class="s2">"form-control"</span> <span class="nv">placeholder</span><span class="err">=</span><span class="s2">"Write a message!"</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="nv">render_field</span> <span class="nv">field</span> <span class="nv">style</span><span class="err">=</span><span class="s2">"font-size: 20px"</span> <span class="cp">%}</span></code></pre></figure>

<p>Now to implement the Bootstrap 4 validation tags, we can change the <strong>new_topic.html</strong> template:</p>

<p><strong>templates/new_topic.html</strong></p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"post"</span> <span class="na">novalidate</span><span class="nt">&gt;</span>
  <span class="cp">{%</span> <span class="nv">csrf_token</span> <span class="cp">%}</span>

  <span class="cp">{%</span> <span class="k">for</span> <span class="nv">field</span> <span class="ow">in</span> <span class="nv">form</span> <span class="cp">%}</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
      <span class="cp">{{</span> <span class="nv">field.label_tag</span> <span class="cp">}}</span>

      <span class="cp">{%</span> <span class="k">if</span> <span class="nv">form.is_bound</span> <span class="cp">%}</span>
        <span class="cp">{%</span> <span class="k">if</span> <span class="nv">field.errors</span> <span class="cp">%}</span>

          <span class="cp">{%</span> <span class="nv">render_field</span> <span class="nv">field</span> <span class="nv">class</span><span class="err">=</span><span class="s2">"form-control is-invalid"</span> <span class="cp">%}</span>
          <span class="cp">{%</span> <span class="k">for</span> <span class="nv">error</span> <span class="ow">in</span> <span class="nv">field.errors</span> <span class="cp">%}</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"invalid-feedback"</span><span class="nt">&gt;</span>
              <span class="cp">{{</span> <span class="nv">error</span> <span class="cp">}}</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>

        <span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
          <span class="cp">{%</span> <span class="nv">render_field</span> <span class="nv">field</span> <span class="nv">class</span><span class="err">=</span><span class="s2">"form-control is-valid"</span> <span class="cp">%}</span>
        <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
      <span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
        <span class="cp">{%</span> <span class="nv">render_field</span> <span class="nv">field</span> <span class="nv">class</span><span class="err">=</span><span class="s2">"form-control"</span> <span class="cp">%}</span>
      <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>

      <span class="cp">{%</span> <span class="k">if</span> <span class="nv">field.help_text</span> <span class="cp">%}</span>
        <span class="nt">&lt;small</span> <span class="na">class=</span><span class="s">"form-text text-muted"</span><span class="nt">&gt;</span>
          <span class="cp">{{</span> <span class="nv">field.help_text</span> <span class="cp">}}</span>
        <span class="nt">&lt;/small&gt;</span>
      <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>

  <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">class=</span><span class="s">"btn btn-success"</span><span class="nt">&gt;</span>Post<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/form&gt;</span></code></pre></figure>

<p>The result is this:</p>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/bootstrap-invalid-1.png" alt="Bootstrap Form Invalid"></p>

<p><img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/bootstrap-invalid-2.png" alt="Bootstrap Form Partially Valid"></p>

<p>So, we have three different rendering states:</p>

<ul>
  <li><strong>Initial state</strong>: the form has no data (is not bound)</li>
  <li><strong>Invalid</strong>: we add the <code class="highlighter-rouge">.is-invalid</code> CSS class and add error messages in an element with a class
<code class="highlighter-rouge">.invalid-feedback</code>. The form field and the messages are rendered in red.</li>
  <li><strong>Valid</strong>: we add the <code class="highlighter-rouge">.is-valid</code> CSS class so to paint the form field in green, giving feedback to the user that
this field is good to go.</li>
</ul>

<h5 id="reusable-forms-templates">Reusable Forms Templates</h5>

<p>The template code looks a little bit complicated, right? Well, the good news is that we can reuse this snippet across
the project.</p>

<p>In the <strong>templates</strong> folder, create a new folder named <strong>includes</strong>:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">myproject/
 |-- myproject/
 |    |-- boards/
 |    |-- myproject/
 |    |-- templates/
 |    |    |-- includes/    &lt;-- here!
 |    |    |-- base.html
 |    |    |-- home.html
 |    |    |-- new_topic.html
 |    |    +-- topics.html
 |    +-- manage.py
 +-- venv/</code></pre></figure>

<p>Now inside the <strong>includes</strong> folder, create a file named <strong>form.html</strong>:</p>

<p><strong>templates/includes/form.html</strong></p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="nv">load</span> <span class="nv">widget_tweaks</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">for</span> <span class="nv">field</span> <span class="ow">in</span> <span class="nv">form</span> <span class="cp">%}</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
    <span class="cp">{{</span> <span class="nv">field.label_tag</span> <span class="cp">}}</span>

    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">form.is_bound</span> <span class="cp">%}</span>
      <span class="cp">{%</span> <span class="k">if</span> <span class="nv">field.errors</span> <span class="cp">%}</span>
        <span class="cp">{%</span> <span class="nv">render_field</span> <span class="nv">field</span> <span class="nv">class</span><span class="err">=</span><span class="s2">"form-control is-invalid"</span> <span class="cp">%}</span>
        <span class="cp">{%</span> <span class="k">for</span> <span class="nv">error</span> <span class="ow">in</span> <span class="nv">field.errors</span> <span class="cp">%}</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"invalid-feedback"</span><span class="nt">&gt;</span>
            <span class="cp">{{</span> <span class="nv">error</span> <span class="cp">}}</span>
          <span class="nt">&lt;/div&gt;</span>
        <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
      <span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
        <span class="cp">{%</span> <span class="nv">render_field</span> <span class="nv">field</span> <span class="nv">class</span><span class="err">=</span><span class="s2">"form-control is-valid"</span> <span class="cp">%}</span>
      <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
      <span class="cp">{%</span> <span class="nv">render_field</span> <span class="nv">field</span> <span class="nv">class</span><span class="err">=</span><span class="s2">"form-control"</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>

    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">field.help_text</span> <span class="cp">%}</span>
      <span class="nt">&lt;small</span> <span class="na">class=</span><span class="s">"form-text text-muted"</span><span class="nt">&gt;</span>
        <span class="cp">{{</span> <span class="nv">field.help_text</span> <span class="cp">}}</span>
      <span class="nt">&lt;/small&gt;</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span></code></pre></figure>

<p>Now we change our <strong>new_topic.html</strong> template:</p>

<p><strong>templates/new_topic.html</strong></p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">'base.html'</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span>Start a New Topic<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">breadcrumb</span> <span class="cp">%}</span>
  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"breadcrumb-item"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'home'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>Boards<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"breadcrumb-item"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="nv">url</span> <span class="s1">'board_topics'</span> <span class="nv">board.pk</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">board.name</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"breadcrumb-item active"</span><span class="nt">&gt;</span>New topic<span class="nt">&lt;/li&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
  <span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"post"</span> <span class="na">novalidate</span><span class="nt">&gt;</span>
    <span class="cp">{%</span> <span class="nv">csrf_token</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">include</span> <span class="s1">'includes/form.html'</span> <span class="cp">%}</span>
    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">class=</span><span class="s">"btn btn-success"</span><span class="nt">&gt;</span>Post<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/form&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span></code></pre></figure>

<p>As the name suggests, the <code class="highlighter-rouge"><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">include</span><span class="w"> </span><span class="err">%</span><span class="p">}</span></code> is used to <em>include</em> HTML templates in another
template. It’s a very useful way to reuse HTML components in a project.</p>

<p>The next form we implement, we can simply use <code class="highlighter-rouge"><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">include</span><span class="w"> </span><span class="err">'includes/form.html'</span><span class="w"> </span><span class="err">%</span><span class="p">}</span></code> to render it.</p>

<h5 id="adding-more-tests">Adding More Tests</h5>

<p>Now we are using Django Forms; we can add more tests to make sure it is running smoothly:</p>

<p><strong>boards/tests.py</strong></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="c"># ... other imports</span>
<span class="kn">from</span> <span class="nn">.forms</span> <span class="kn">import</span> <span class="n">NewTopicForm</span>

<span class="k">class</span> <span class="nc">NewTopicTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="c"># ... other tests</span>

    <span class="k">def</span> <span class="nf">test_contains_form</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c"># &lt;- new test</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s">'new_topic'</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">'pk'</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'form'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">form</span><span class="p">,</span> <span class="n">NewTopicForm</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_new_topic_invalid_post_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c"># &lt;- updated this one</span>
        <span class="s">'''
        Invalid post data should not redirect
        The expected behavior is to show the form again with validation errors
        '''</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s">'new_topic'</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">'pk'</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'form'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">form</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span></code></pre></figure>

<p>Now we are using the <code class="highlighter-rouge">assertIsInstance</code> method for the first time. Basically we are grabbing the form instance in the
context data, and checking if it is a <code class="highlighter-rouge">NewTopicForm</code>. In the last test, we added the <code class="highlighter-rouge">self.assertTrue(form.errors)</code>
to make sure the form is showing errors when the data is invalid.</p>

<hr>

<h4 id="conclusions">Conclusions</h4>

<p>In this tutorial, we focused on URLs, Reusable Templates, and Forms. As usual, we also implement several test cases.
That’s how we develop with confidence.</p>

<p>Our tests file is starting to get big, so in the next tutorial, we are going to refactor it to improve the
maintainability so to sustain the growth of our code base.</p>

<p>We are also reaching a point where we need to interact with the logged in user. In the next tutorial, we are going to
learn everything about authentication and how to protect our views and resources.</p>

<p>I hope you enjoyed the third part of this tutorial series! The fourth part is coming out next week, on Sep 25, 2017.
If you would like to get notified when the fourth part is out, you can <a href="https://colossus.simpleisbetterthancomplex.com/subscribe/d2320a41-0378-4aa8-8f4e-5bb1ffcd521d/" target="_blank">subscribe to our mailing list</a>.</p>

<p>The source code of the project is available on GitHub. The current state of the project can be found under the release
tag <strong>v0.3-lw</strong>. The link below will take you to the right place:</p>

<p><a href="https://github.com/sibtc/django-beginners-guide/tree/v0.3-lw" target="_blank">https://github.com/sibtc/django-beginners-guide/tree/v0.3-lw</a></p>

<hr>

<div class="popular-posts">
  <div class="row">
    <div class="six columns">
      <a href="https://simpleisbetterthancomplex.com/series/2017/09/11/a-complete-beginners-guide-to-django-part-2.html" style="text-decoration: none">
        <img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/featured(1).jpg" alt="A Complete Beginner&#39;s Guide to Django - Part 2" title="A Complete Beginner&#39;s Guide to Django - Part 2">
        <h5 style="margin-top: 1rem;">← Part 2 - Fundamentals</h5>
      </a>
    </div>
    <div class="six columns">
      <a href="https://simpleisbetterthancomplex.com/series/2017/09/25/a-complete-beginners-guide-to-django-part-4.html" style="text-decoration: none">
        <img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/featured(2).jpg" alt="A Complete Beginner&#39;s Guide to Django - Part 4" title="A Complete Beginner&#39;s Guide to Django - Part 4">
        <h5 style="text-align: right; margin-top: 1rem;">Part 4 - Authentication →</h5>
      </a>
    </div>
  </div>
</div>

          </article>

          <hr class="dashed">
          <div>
            <div style="color:#aaa;font-size:1.2rem;margin-bottom:1rem;text-align:center;">ADVERTISEMENT</div>
            <script async="" src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/f.txt"></script>
            <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-5430683801108011" data-ad-slot="1350192533"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
          </div>

          <hr class="dashed">
<div class="row">
  <div class="six columns post-tags" style="padding-top: 4px">
    
      <a href="https://simpleisbetterthancomplex.com/tag/python/"><span class="tag">python</span></a>
    
      <a href="https://simpleisbetterthancomplex.com/tag/django/"><span class="tag">django</span></a>
    
      <a href="https://simpleisbetterthancomplex.com/tag/guide/"><span class="tag">guide</span></a>
    
      <a href="https://simpleisbetterthancomplex.com/tag/beginners/"><span class="tag">beginners</span></a>
    
      <a href="https://simpleisbetterthancomplex.com/tag/urls/"><span class="tag">urls</span></a>
    
      <a href="https://simpleisbetterthancomplex.com/tag/forms/"><span class="tag">forms</span></a>
    
      <a href="https://simpleisbetterthancomplex.com/tag/templates/"><span class="tag">templates</span></a>
    
  </div>
  <div class="six columns post-share">
    <div class="social">
  Share this post
  <a href="http://vk.com/share.php?url=http://sibt.co/2jCmr1i" rel="nofollow" target="_blank" title="Share on VK">
    <i class="fa fa-vk"></i>
  </a>
  <a href="https://twitter.com/intent/tweet?text=A%20Complete%20Beginner%27s%20Guide%20to%20Django%20-%20Part%203&amp;url=http://sibt.co/2xKui37&amp;via=vitorfs&amp;related=vitorfs" rel="nofollow" target="_blank" title="Share on Twitter">
    <i class="fa fa-twitter"></i>
  </a>
  <a href="https://www.facebook.com/sharer/sharer.php?app_id=1645747765697865&amp;u=http://sibt.co/2jCY6sl" rel="nofollow" target="_blank" title="Share on Facebook">
    <i class="fa fa-facebook"></i>
  </a>
  <a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http://sibt.co/2jE04sf&amp;title=A%20Complete%20Beginner%27s%20Guide%20to%20Django%20-%20Part%203&amp;summary=In%20this%20tutorial%20we%20are%20going%20to%20dive%20deep%20into%20two%20fundamental%20concepts,%20URLs%20and%20Forms.%20In%20the%20process%20we%20are%20going%20to%20explore%20many%20other%20concepts%20like%20creating%20reusable%20templates%20and%20installing%20...&amp;source=https://simpleisbetterthancomplex.com" rel="nofollow" target="_blank" title="Share on LinkedIn">
    <i class="fa fa-linkedin"></i>
  </a>
</div>

  </div>
</div>

        </div>

        <div class="card">
          
  <div id="comments">
    <div id="disqus_thread"></div>
    <script>
      var disqus_config = function () {
        this.page.url = 'https://simpleisbetterthancomplex.com/series/2017/09/18/a-complete-beginners-guide-to-django-part-3.html';
        this.page.identifier = '/series/2017/09/18/a-complete-beginners-guide-to-django-part-3';
      };
      (function() {
      var d = document, s = d.createElement('script');
      s.src = '//simpleisbetterthancomplex.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
      })();
    </script>
    <script id="dsq-count-scr" src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/count.js" async=""></script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>


        </div>
      </div>
    </div>
  </div>

  <div class="container post post-footer">
    <div class="card subscribe">
  <form action="https://colossus.simpleisbetterthancomplex.com/subscribe/d2320a41-0378-4aa8-8f4e-5bb1ffcd521d/" method="post" target="_blank" novalidate="">
    <h4>
      <span class="fa fa-send" style="margin-right: 5px"></span> Subscribe to our Mailing List
    </h4>
    <h5>Receive updates from the Blog!</h5>
    <div class="row">
      <div class="eight columns">
        <input class="u-full-width" placeholder="Your email address" type="email" name="email">
      </div>
      <div class="four columns">
        <button type="submit" class="u-full-width">Subscribe</button>
      </div>
    </div>
  </form>
</div>

    <div class="card popular-posts">
  <h4>Popular Posts</h4>
  <div class="row">
    
      <div class="four columns">
        <a href="https://simpleisbetterthancomplex.com/tutorial/2016/07/22/how-to-extend-django-user-model.html">
          <img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/featured-post-image.jpg" alt="How to Extend Django User Model" title="How to Extend Django User Model">
          How to Extend Django User Model
        </a>
      </div>
    
      <div class="four columns">
        <a href="https://simpleisbetterthancomplex.com/tutorial/2016/05/11/how-to-setup-ssl-certificate-on-nginx-for-django-application.html">
          <img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/featured-post-image(1).jpg" alt="How to Setup a SSL Certificate on Nginx for a Django Application" title="How to Setup a SSL Certificate on Nginx for a Django Application">
          How to Setup a SSL Certificate on Nginx for a Django Application
        </a>
      </div>
    
      <div class="four columns">
        <a href="https://simpleisbetterthancomplex.com/tutorial/2016/10/14/how-to-deploy-to-digital-ocean.html">
          <img src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/featured-do.jpg" alt="How to Deploy a Django Application to Digital Ocean" title="How to Deploy a Django Application to Digital Ocean">
          How to Deploy a Django Application to Digital Ocean
        </a>
      </div>
    
  </div>
</div>

  </div>

  <footer>
  <div class="container">
    <ul>
      <li>© 2015-2019 simple is better than complex</li>
      <li><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank">cc by-nc-sa 3.0</a></li>
      <li>//</li>
      <li><a href="https://simpleisbetterthancomplex.com/about/" rel="author">about</a></li>
      <li><a href="https://simpleisbetterthancomplex.com/contact/">contact</a></li>
      <li><a href="https://simpleisbetterthancomplex.com/faq/">faq</a></li>
      <li><a href="https://simpleisbetterthancomplex.com/cookies/">cookies</a></li>
      <li><a href="https://simpleisbetterthancomplex.com/privacy/">privacy policy</a></li>
    </ul>
  </div>
</footer>
<div class="overlay"></div>

  
  <script id="ga-page-views" src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/page-views.js" async=""></script>
  <script src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/onejs"></script>


<style>
.related-posts .row {
  display: grid;
  grid-gap: 20px;
  grid-template-columns: repeat(3, 1fr);
}

.related-posts .four.columns {
  width: 100%;
}
</style>

<script>
_bsa.init('recommended', 'CK7I4KJJ', 'placement:simpleisbetterthancomplexcom',
    {
      target: '.related-posts .columns',
      template: `
<div class="four columns">
<a href="##link##" rel="noopener nofollow">
<img src="##smallImage##" alt="##title##" title="##title##">[Sponsored] ##title##</a>
</div>
      `
    }
  );
</script>

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": "https://simpleisbetterthancomplex.com/series/2017/09/18/a-complete-beginners-guide-to-django-part-3.html",
  "headline": "A Complete Beginner's Guide to Django - Part 3",
  "image": {
    "@type": "ImageObject",
    "url": "https://simpleisbetterthancomplex.com/media/series/beginners-guide/1.11/part-3/featured.jpg",
    "height": 370,
    "width": 960
  },
  "datePublished": "2017-09-18T08:00:00+03:00",
  "dateModified": "2017-09-18T08:00:00+03:00",
  "author": {
    "@type": "Person",
    "name": "Vitor Freitas"
  },
   "publisher": {
    "@type": "Organization",
    "name": "Simple is Better Than Complex",
    "logo": {
      "@type": "ImageObject",
      "url": "https://simpleisbetterthancomplex.com/img/gplus_logo.png",
      "height": 60,
      "width": 600
    }
  },
  "description": "In this tutorial we are going to dive deep into two fundamental concepts, URLs and Forms. In the process we are going to explore many other concepts like creating reusable templates and installing ..."
}
</script>

  <script src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/affix.js"></script>
  <script src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/jquery.waypoints.min.js"></script>
  <script src="./A Complete Beginner&#39;s Guide to Django - Part 3_files/inview.min.js"></script>
  <script>
    $(function () {
      var sidebarMaxHeight = $(window).height() - 90;
      if (sidebarMaxHeight > 600) {
        $('head').append('<style type="text/css">@media (min-width: 1200px) {#seriesSideBar.affix div.card { max-height: '+sidebarMaxHeight+'px!important; }}</style>');
      }

      /* sidebar affix */
      $("#seriesSideBar").affix({
        offset: {
          top: $("#seriesSideBar").offset().top - 50,
          bottom: function () {
            return ($("footer").outerHeight(true) + $(".post-footer").outerHeight(true));
          }
        }
      });

      /* sidebar scrollspy */
      var headers = Array();
      var trackContents = function (el) {
        var inview = new Waypoint.Inview({
          element: el,
          enter: function(direction) {
            $("#seriesSideBar ul li a").removeClass("active");
            $("#seriesSideBar ul li a[href='#" + this.element.id + "']").addClass("active");
          },
          exit: function(direction) {
            if (direction == "up") {
              var index = headers.indexOf(this.element.id);
              $("#seriesSideBar ul li a").removeClass("active");
              if (index > 0) {
                $("#seriesSideBar ul li a[href='#" + headers[index - 1] + "']").addClass("active");
              }
            }
          }
        });
      };
      $("article h4, article h5").each(function () {
        trackContents(this);
        headers.push(this.id);
      });

      /* article default os */
      var os = getOS();
      $("nav.platform a[data-platform='" + os + "']").addClass("active");
      $("body").addClass("platform-" + os);

      $(".js-set-platform a").click(function () {
        var $btn = $(this);
        var $body = $("body");
        var platform = $btn.attr("data-platform");
        var platformClass = "platform-" + platform;
        $body.removeClass("platform-mac platform-windows platform-linux");
        $body.addClass(platformClass);
        $("nav.platform a").removeClass("active");
        $("nav.platform a[data-platform='" + platform + "']").addClass("active");
      });

      var platformInview = new Waypoint.Inview({
        element: $("#platformArticle")[0],
        enter: function(direction) {
          $("#platformSideBar").hide();
        },
        exit: function(direction) {
          if (direction == "up") {
            $("#platformSideBar").hide();
          }
          else {
            $("#platformSideBar").show();
          }
        }
      });

    });
  </script>
  <noscript><style type="text/css">body article div.platform-windows { display: block!important; }</style></noscript>
  


<div id="fatkun-drop-panel">
        <a id="fatkun-drop-panel-close-btn">×</a>
            <div id="fatkun-drop-panel-inner">
                <div class="fatkun-content">
                    <svg class="fatkun-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5892"><path d="M494.933333 782.933333c2.133333 2.133333 4.266667 4.266667 8.533334 6.4h8.533333c6.4 0 10.666667-2.133333 14.933333-6.4l2.133334-2.133333 275.2-275.2c8.533333-8.533333 8.533333-21.333333 0-29.866667-8.533333-8.533333-21.333333-8.533333-29.866667 0L533.333333 716.8V128c0-12.8-8.533333-21.333333-21.333333-21.333333s-21.333333 8.533333-21.333333 21.333333v588.8L249.6 475.733333c-8.533333-8.533333-21.333333-8.533333-29.866667 0-8.533333 8.533333-8.533333 21.333333 0 29.866667l275.2 277.333333zM853.333333 874.666667H172.8c-12.8 0-21.333333 8.533333-21.333333 21.333333s8.533333 21.333333 21.333333 21.333333H853.333333c12.8 0 21.333333-8.533333 21.333334-21.333333s-10.666667-21.333333-21.333334-21.333333z" p-id="5893"></path></svg>
                    <div class="fatkun-title">Drag and Drop</div>
                    <div class="fatkun-desc">The image will be downloaded</div>
                </div>
            </div>
    </div><div id="fatkun-drop-panel">
        <a id="fatkun-drop-panel-close-btn">×</a>
            <div id="fatkun-drop-panel-inner">
                <div class="fatkun-content">
                    <svg class="fatkun-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5892"><path d="M494.933333 782.933333c2.133333 2.133333 4.266667 4.266667 8.533334 6.4h8.533333c6.4 0 10.666667-2.133333 14.933333-6.4l2.133334-2.133333 275.2-275.2c8.533333-8.533333 8.533333-21.333333 0-29.866667-8.533333-8.533333-21.333333-8.533333-29.866667 0L533.333333 716.8V128c0-12.8-8.533333-21.333333-21.333333-21.333333s-21.333333 8.533333-21.333333 21.333333v588.8L249.6 475.733333c-8.533333-8.533333-21.333333-8.533333-29.866667 0-8.533333 8.533333-8.533333 21.333333 0 29.866667l275.2 277.333333zM853.333333 874.666667H172.8c-12.8 0-21.333333 8.533333-21.333333 21.333333s8.533333 21.333333 21.333333 21.333333H853.333333c12.8 0 21.333333-8.533333 21.333334-21.333333s-10.666667-21.333333-21.333334-21.333333z" p-id="5893"></path></svg>
                    <div class="fatkun-title">Drag and Drop</div>
                    <div class="fatkun-desc">The image will be downloaded</div>
                </div>
            </div>
    </div></body></html>